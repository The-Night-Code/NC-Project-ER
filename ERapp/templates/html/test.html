




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            background-color: gray;
            color: white;
            cursor: pointer;
        }

        .badge:hover {
            background-color: blue;
        }

        .select-container {
            display: none;
        }

        .badge:hover + .select-container {
            display: block;
        }
    </style>
</head>
<body>
    <table id="tableDATA1">
        <tbody id="myTable1">
            <tr>
                <td>
                    <span class="badge">Primary</span>
                    <div class="select-container">
                        <select class="form-select" aria-label="Default select example">
                            <option value="Primary" style="background-color: blue">One</option>
                            <option value="Secondary" selected style="background-color: red">Two</option>
                            <option value="Success" style="background-color: green">Three</option>
                        </select>
                    </div>
                </td>
            </tr>
            <!-- Add more rows with the same structure as above -->
        </tbody>
        <tfoot>
            <!-- Add any footer content here -->
        </tfoot>
    </table>

    <table id="tableDATA2">
        <tbody id="myTable2">
            <tr>
                <td>
                    <span class="badge">Primary</span>
                    <div class="select-container">
                        <select class="form-select" aria-label="Default select example">
                            <option value="Primary" style="background-color: blue">One</option>
                            <option value="Secondary" selected style="background-color: red">Two</option>
                            <option value="Success" style="background-color: green">Three</option>
                        </select>
                    </div>
                </td>
            </tr>
            <!-- Add more rows with the same structure as above -->
        </tbody>
        <tfoot>
            <!-- Add any footer content here -->
        </tfoot>
    </table>

    <table id="tableDATA3">
        <tbody id="myTable3">
            <tr>
                <td>
                    <span class="badge">Primary</span>
                    <div class="select-container">
                        <select class="form-select" aria-label="Default select example">
                            <option value="Primary" style="background-color: blue">One</option>
                            <option value="Secondary" selected style="background-color: red">Two</option>
                            <option value="Success" style="background-color: green">Three</option>
                        </select>
                    </div>
                </td>
            </tr>
            <!-- Add more rows with the same structure as above -->
        </tbody>
        <tfoot>
            <!-- Add any footer content here -->
        </tfoot>
    </table>

    <script>
        function initializeTable(tableId) {
            const selectElements = document.querySelectorAll(`#${tableId} .form-select`);
            const badgeElements = document.querySelectorAll(`#${tableId} .badge`);

            // Initialize badges with their selected values
            badgeElements.forEach((badge, index) => {
                const select = selectElements[index];
                badge.textContent = select.options[select.selectedIndex].value;
            });

            // Add event listener to update badges when an option is selected
            selectElements.forEach((select, index) => {
                select.addEventListener('change', () => {
                    badgeElements[index].textContent = select.options[select.selectedIndex].value;
                });
            });
        }

        // Initialize behavior for all three tables
        initializeTable('tableDATA1');
        initializeTable('tableDATA2');
        initializeTable('tableDATA3');
    </script>
</body>
</html>











































{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title></title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->


  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">


  <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css"> 
  

  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/quill/quill.snow.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/quill/quill.bubble.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/remixicon/remixicon.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/simple-datatables/style.css' %}" rel="stylesheet">


</head>

<body>

<div class="row">
           
    <div class="col-12">
      <div class="card recent-sales overflow-auto">

        <div class="filter">
          <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <li class="dropdown-header text-start">
              <h6>Filter</h6>
            </li>

            <li><a class="dropdown-item" href="#">Today</a></li>
            <li><a class="dropdown-item" href="#">This Month</a></li>
            <li><a class="dropdown-item" href="#">This Year</a></li>
          </ul>
        </div>
        
        <div class="card-body" style="height:500px;">
          <h5 class="card-title">Title <span>| title</span></h5>

          
          
          <input class="form-control2" type="text" id="filterInput" placeholder="Search..." style="width:30%;min-width:100px;">
          <form method="post"  enctype="multipart/form-data">
            {% csrf_token %}
            <table class="table  table-hover   table-bordered  table-borderless border-info " id="tableDATA1" cellspacing="0" >  <!-- table-sm  table-responsive-->

                <thead class="table-dark border-info">
                  <th></th><!--style="width:auto;"-->
                  <th data-sortable="true" data-column="id" >id <span class="sortable-icon"  data-column="id"></span></th>
                  <th data-sortable="true" data-column="nom" >Nom <span class="sortable-icon"  data-column="nom"></span></th>  
                  <th data-sortable="true" data-column="prenom">Prénom <span class="sortable-icon"  data-column="prenom"></span></th> 
                  <th data-sortable="true" data-column="adresse">Adresse <span class="sortable-icon"  data-column="adresse"></th> 
                  <th>N° de tél</th> 
                  <th>Visite technique</th> 
                  <th>État</th> 
                  <th>Travaux à preconise</th> 
                  <th>Audit v1</th> 
                  <th>Audit v2</th> 
                  <th>Audit v3</th> 
                  <th>Audit fin</th> 
                  <th>Coffrac</th> 
                  <th>Payer</th>
                  <th>Agent</th>
                  <th>Auditeur</th>

                </thead>
                <tbody id="myTable1">
                    {% for item in data %}
                    <input class="input_table_data" type="hidden" name="cell_data0" id="cell_data0edit{{item.cell_id}}" value="{{item.cell_id}}">
                    <tr>
                        <td style="width:auto;"><button  class="button_table_data" type="button" id="edit_col_in_table" name="" value="" onclick="my_Func_edit_table('{{item.cell_id}}') "><i class="ri-edit-2-fill"></i></button></td>
                        <td ><p style="width:auto;">{{ item.cell_id }}</p></td>
                        <td class="td_input_cell" ><input class="input_table_data" type="text" name="cell_data1edit" id="cell_data1edit{{ item.cell_id }}" value="{{ item.firstname }}"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data2edit" id="cell_data2edit{{ item.cell_id }}" value="{{ item.lastname }}"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data3edit" id="cell_data3edit{{ item.cell_id }}" value="{{ item.address }}"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4edit" id="cell_data4edit{{ item.cell_id }}" value="{{ item.num }}"  ></td>  
                        

                        <td class="td_input_cell tooltipTrigger">{% if item.vt %}
                          <a href="{{ item.vt.url }}" download>{{ item.vt.name }}</a>
                          {% endif %}<span class="tooltip"><input class="input_table_data" type="file" name="cell_data5edit" id="cell_data5edit{{ item.cell_id }}" value="{{ item.vt }}" accept="image/*,.pdf,.docx,.doc,.xls" multiple ></span></td>  <!--  target="_blank"-->
                        
                        <td class="badge-cell" data-state="badge">
                          <span class="badge" data-badge="Modification Faite">Modification Faite</span>
                          <span class="badge" data-badge="Payer">Payer</span>
                          <span class="badge" data-badge="A modifier">A modifier</span>
                          <span class="badge" data-badge="Annule">Annule</span>
                          <span class="badge" data-badge="En cours">Annule</span>
                          <span class="badge" data-badge="Fin">Fin</span>

                          <select class="form-select" aria-label="Default select example"  name="cell_data6edit" id="cell_data6edit{{ item.cell_id }}" style="background-color:gray;">
                              <option value="Modification Faite" style="background-color:cyan" {% if item.etat  == "Modification Faite" %}selected{% endif %}>Modification Faite</option>
                              <option value="Payer" style="background-color:purple;" {% if item.etat  == "Payer" %}selected{% endif %} >Payer</option>
                              <option value="A modifier" style="background-color:gray;"  {% if item.etat  == "A modifier" %}selected{% endif %} >A modifier</option>
                              <option value="Annule" style="background-color: red" {% if item.etat  == "Annule" %}selected{% endif %} >Annule</option>
                              <option value="En cours" style="background-color:orange;" {% if item.etat  == "En cours" %}selected{% endif %} >En cours</option>
                              <option value="Fin" style="background-color:green;" {% if item.etat  == "Fin" %}selected{% endif %} >Fin</option>
                          </select>
                        </td>


                        <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>

                    </tr>
                    {% endfor %}

                </tbody>
                <tfoot>
                    <tr>
                        <td><button type="submit" class="button_table_data" style="text-align:left;" function=myFunctionadd-b()><i class="ri-add-circle-line">Add</i></button></td>
                        <td></td>
                        <td class="td_input_cell"> <input class="input_table_data" type="text" name="cell_data1add"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data2add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data3add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4add" ></td>



                              
                        <td class="td_input_cell"><input class="input_table_data" type="file" name="cell_data5add" accept="image/*,.pdf,.docx,.doc,.xls" multiple></td>



                        <td class="badge-cellfoot " data-state="badgefoot">
                          <span class="badgefoot" data-badgefoot="Modification Faite">Modification Faite</span>
                          <span class="badgefoot" data-badgefoot="Payer">Payer</span>
                          <span class="badgefoot" data-badgefoot="A modifier">A modifier</span>
                          <span class="badgefoot" data-badgefoot="Annule">Annule</span>
                          <span class="badgefoot" data-badgefoot="En cours">Annule</span>
                          <span class="badgefoot" data-badgefoot="Fin">Fin</span>

                          <select class="form-select form-selectfoot" aria-label="Default select example" name="cell_data6add" style="background-color:gray;">
                              <option value="Modification Faite" style="background-color:cyan" >Modification Faite</option>
                              <option value="Payer" style="background-color:purple;">Payer</option>
                              <option value="A modifier" style="background-color:gray;">A modifier</option>
                              <option value="Annule" style="background-color: red">Annule</option>
                              <option value="En cours" style="background-color:orange;" selected>En cours</option>
                              <option value="Fin" style="background-color:green;">Fin</option>
                          </select>
                        </td>



                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data7add" ></td>
                        
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data8add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data9add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data10add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data11add" ></td>
                        
                        
                    </tr>
                </tfoot>
            </table>
            <!--{} form.as_p -->
            <!--<button class="btn ri-add-fill"></button>-->
            
        </form>
        
        


        </div>



      </div>

      
    </div><!-- End Recent Sales -->
    <!--  ======================================================== end table  ===============================================================  -->

  </div>













  <div class="row">
           
    <div class="col-12">
      <div class="card recent-sales overflow-auto">

        <div class="filter">
          <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <li class="dropdown-header text-start">
              <h6>Filter</h6>
            </li>

            <li><a class="dropdown-item" href="#">Today</a></li>
            <li><a class="dropdown-item" href="#">This Month</a></li>
            <li><a class="dropdown-item" href="#">This Year</a></li>
          </ul>
        </div>
        
        <div class="card-body" style="height:500px;">
          <h5 class="card-title">Title <span>| title</span></h5>

          
          
          <input class="form-control2" type="text" id="filterInput" placeholder="Search..." style="width:30%;min-width:100px;">
          <form method="post"  enctype="multipart/form-data">
            {% csrf_token %}
            <table class="table  table-hover   table-bordered  table-borderless border-info " id="tableDATA2" cellspacing="0" >  <!-- table-sm  table-responsive-->

                <thead class="table-dark border-info">
                  <th></th><!--style="width:auto;"-->
                  <th data-sortable="true" data-column="id" >id <span class="sortable-icon"  data-column="id"></span></th>
                  <th data-sortable="true" data-column="nom" >Nom <span class="sortable-icon"  data-column="nom"></span></th>  
                  <th data-sortable="true" data-column="prenom">Prénom <span class="sortable-icon"  data-column="prenom"></span></th> 
                  <th data-sortable="true" data-column="adresse">Adresse <span class="sortable-icon"  data-column="adresse"></th> 
                  <th>N° de tél</th> 
                  <th>Visite technique</th> 
                  <th>État</th> 
                  <th>Travaux à preconise</th> 
                  <th>Audit v1</th> 
                  <th>Audit v2</th> 
                  <th>Audit v3</th> 
                  <th>Audit fin</th> 
                  <th>Coffrac</th> 
                  <th>Payer</th>
                  <th>Agent</th>
                  <th>Auditeur</th>

                </thead>
                <tbody id="myTable2">
                    {% for item in data %}
                    <input class="input_table_data" type="hidden" name="cell_data0" id="cell_data0edit{{item.cell_id}}" value="{{item.cell_id}}">
                    <tr>
                        <td style="width:auto;"><button  class="button_table_data" type="button" id="edit_col_in_table" name="" value="" onclick="my_Func_edit_table('{{item.cell_id}}') "><i class="ri-edit-2-fill"></i></button></td>
                        <td ><p style="width:auto;">{{ item.cell_id }}</p></td>
                        <td class="td_input_cell" ><input class="input_table_data" type="text" name="cell_data1edit" id="cell_data1edit{{ item.cell_id }}" value="{{ item.firstname }}"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data2edit" id="cell_data2edit{{ item.cell_id }}" value="{{ item.lastname }}"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data3edit" id="cell_data3edit{{ item.cell_id }}" value="{{ item.address }}"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4edit" id="cell_data4edit{{ item.cell_id }}" value="{{ item.num }}"  ></td>  
                        

                        <td class="td_input_cell tooltipTrigger">{% if item.vt %}
                          <a href="{{ item.vt.url }}" download>{{ item.vt.name }}</a>
                          {% endif %}<span class="tooltip"><input class="input_table_data" type="file" name="cell_data5edit" id="cell_data5edit{{ item.cell_id }}" value="{{ item.vt }}" accept="image/*,.pdf,.docx,.doc,.xls" multiple ></span></td>  <!--  target="_blank"-->
                        
                        <td class="badge-cell" data-state="badge">
                          <span class="badge" data-badge="Modification Faite">Modification Faite</span>
                          <span class="badge" data-badge="Payer">Payer</span>
                          <span class="badge" data-badge="A modifier">A modifier</span>
                          <span class="badge" data-badge="Annule">Annule</span>
                          <span class="badge" data-badge="En cours">Annule</span>
                          <span class="badge" data-badge="Fin">Fin</span>

                          <select class="form-select" aria-label="Default select example"  name="cell_data6edit" id="cell_data6edit{{ item.cell_id }}" style="background-color:gray;">
                              <option value="Modification Faite" style="background-color:cyan" {% if item.etat  == "Modification Faite" %}selected{% endif %}>Modification Faite</option>
                              <option value="Payer" style="background-color:purple;" {% if item.etat  == "Payer" %}selected{% endif %} >Payer</option>
                              <option value="A modifier" style="background-color:gray;"  {% if item.etat  == "A modifier" %}selected{% endif %} >A modifier</option>
                              <option value="Annule" style="background-color: red" {% if item.etat  == "Annule" %}selected{% endif %} >Annule</option>
                              <option value="En cours" style="background-color:orange;" {% if item.etat  == "En cours" %}selected{% endif %} >En cours</option>
                              <option value="Fin" style="background-color:green;" {% if item.etat  == "Fin" %}selected{% endif %} >Fin</option>
                          </select>
                        </td>


                        <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>

                    </tr>
                    {% endfor %}

                </tbody>
                <tfoot>
                    <tr>
                        <td><button type="submit" class="button_table_data" style="text-align:left;" function=myFunctionadd-b()><i class="ri-add-circle-line">Add</i></button></td>
                        <td></td>
                        <td class="td_input_cell"> <input class="input_table_data" type="text" name="cell_data1add"  ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data2add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data3add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4add" ></td>



                              
                        <td class="td_input_cell"><input class="input_table_data" type="file" name="cell_data5add" accept="image/*,.pdf,.docx,.doc,.xls" multiple></td>



                        <td class="badge-cellfoot" data-state="badgefoot">
                          <span class="badgefoot" data-badgefoot="Modification Faite">Modification Faite</span>
                          <span class="badgefoot" data-badgefoot="Payer">Payer</span>
                          <span class="badgefoot" data-badgefoot="A modifier">A modifier</span>
                          <span class="badgefoot" data-badgefoot="Annule">Annule</span>
                          <span class="badgefoot" data-badgefoot="En cours">Annule</span>
                          <span class="badgefoot" data-badgefoot="Fin">Fin</span>

                          <select class="form-select form-selectfoot" aria-label="Default select example" name="cell_data6add" style="background-color:gray;">
                              <option value="Modification Faite" style="background-color:cyan" >Modification Faite</option>
                              <option value="Payer" style="background-color:purple;">Payer</option>
                              <option value="A modifier" style="background-color:gray;">A modifier</option>
                              <option value="Annule" style="background-color: red">Annule</option>
                              <option value="En cours" style="background-color:orange;" selected>En cours</option>
                              <option value="Fin" style="background-color:green;">Fin</option>
                          </select>
                        </td>



                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data7add" ></td>
                        
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data8add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data9add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data10add" ></td>
                        <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data11add" ></td>
                        
                        
                    </tr>
                </tfoot>
            </table>
            <!--{} form.as_p -->
            <!--<button class="btn ri-add-fill"></button>-->
            
        </form>
        



        </div>



      </div>

      
    </div><!-- End Recent Sales -->
    <!--  ======================================================== end table  ===============================================================  -->

  </div>








<!--  search by cells -->
<script>
  document.getElementById("filterInput").addEventListener("keyup", filterTable);
  
  function filterTable() {
    var input, filter, table, tr, td, i, j, txtValue;
    input = document.getElementById("filterInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");
  
    for (i = 0; i < tr.length; i++) {
      tr[i].style.display = "none"; // Hide the row by default
      td = tr[i].getElementsByTagName("td");
  
      for (j = 0; j < td.length; j++) {
        var inputElement = td[j].querySelector("input[type='text']");
        var pElement = td[j].querySelector("p");
        
        if (inputElement) {
          txtValue = inputElement.value.toUpperCase();
          if (txtValue.indexOf(filter) > -1) {
            tr[i].style.display = ""; // Show the row if a match is found in any input element
            break; // No need to check other cells in this row
          }
        }
  
        if (pElement) {
          txtValue = pElement.textContent || pElement.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = ""; // Show the row if a match is found in any <p> element
            break; // No need to check other cells in this row
          }
        }
      }
    }
  }
  </script>
<!-- end search by cells -->


<!--  sort by columns -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const table = document.getElementById('tableDATA');
    const headers = table.querySelectorAll('th[data-sortable="true"]');
    headers.forEach(header => {
      header.addEventListener('click', () => {
        const column = header.getAttribute('data-column');
        const isAscending = !header.classList.contains('desc');
        sortTable(table, column, isAscending);
        headers.forEach(h => h.classList.remove('desc'));
        header.classList.toggle('desc', !isAscending);
      });
    });
  });
  
  function sortTable(table, column, isAscending) {
    const tbody = table.querySelector('tbody');
    const rows = Array.from(tbody.querySelectorAll('tr'));
    rows.sort((rowA, rowB) => {
      const cellA = rowA.querySelector(`td:nth-child(${columnIndex(column)})`).textContent;
      const cellB = rowB.querySelector(`td:nth-child(${columnIndex(column)})`).textContent;
      return isAscending ? cellA.localeCompare(cellB) : cellB.localeCompare(cellA);
    });
    rows.forEach(row => tbody.appendChild(row));
  }
  
  function columnIndex(columnName) {
    const headers = document.querySelectorAll('th[data-sortable="true"]');
    for (let i = 0; i < headers.length; i++) {
      if (headers[i].getAttribute('data-column') === columnName) {
        return i + 1;
      }
    }
    return -1;
  }
  
</script>





<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!--  select box for rows table -->
<script>
 // Function to update the badge based on the selected option in a row
function updateBadge(row) {
  const selectElement = row.querySelector('.form-select');
  const badgeElements = row.querySelectorAll('.badge');
  const selectedOption = selectElement.value;

  badgeElements.forEach(badge => {
      badge.style.display = 'none';
  });

  row.querySelector(`.badge[data-badge="${selectedOption}"]`).style.display = 'inline-block';
}

// Add event listener for each row in the first table (tableDATA1)
const rowsTable1 = document.querySelectorAll('#tableDATA1 #myTable1 tr');

rowsTable1.forEach(row => {
  const selectElement = row.querySelector('.form-select');
  
  // Initial call to set the badge based on the default selected option in each row
  updateBadge(row);

  selectElement.addEventListener('change', () => {
      updateBadge(row);
  });
});

// Add event listener for each row in the second table (tableDATA2)
const rowsTable2 = document.querySelectorAll('#tableDATA2 #myTable2 tr');

rowsTable2.forEach(row => {
  const selectElement = row.querySelector('.form-select');
  
  // Initial call to set the badge based on the default selected option in each row
  updateBadge(row);

  selectElement.addEventListener('change', () => {
      updateBadge(row);
  });
});
</script>
<!--  end select box for rows table -->


<!--  select box for foot table -->
<script>
  const selectElement = document.querySelector('.form-selectfoot');
  const badgeElements = document.querySelectorAll('.badgefoot');
  
  // Function to update the badge based on the selected option
  function updateBadgefoot() {
      const selectedOption = selectElement.value;
      badgeElements.forEach(badgefoot => {
          badgefoot.style.display = 'none';
      });
      document.querySelector(`.badgefoot[data-badgefoot="${selectedOption}"]`).style.display = 'inline-block';
  }
  
  // Initial call to set the badge based on the default selected option
  updateBadgefoot();
  
  // Add event listener to update the badge when the select element changes
  selectElement.addEventListener('change', updateBadgefoot);

</script>
<!-- end select box for foot table -->

<!-- scroll table -->
<script>
  $(document).ready(function () {
    $('#tableDATA').DataTable({
      "scrollY": "50vh",
      "scrollCollapse": true,
    });
    $('.dataTables_length').addClass('bs-select');
  });
</script>
<script>
  $(document).ready(function () {
    $('#tableDATA').DataTable({
      "scrollX": true
    });
    $('.dataTables_length').addClass('bs-select');
  });
</script>
<!-- end scroll table -->

<!-- add row to table -->
<script>
    $(document).ready(function() {
        $("#add-row").click(function() {
            $("#data-table tbody").append("<tr><td><input type='text' name='cell_data'></td></tr>");
            $("#data-table2 tbody").append("<tr><td><input type='text' name='cell_data2'></td></tr>");
        });

    });
</script>
<!-- end add row to table -->





<!-- redirect with param -->
<script>
        
  function my_Func_edit_table(id) {
    
      var x0 = document.getElementById("cell_data0edit"+id).value;
      var x1 = document.getElementById("cell_data1edit"+id).value;
      var x2 = document.getElementById("cell_data2edit"+id).value;
      var x3 = document.getElementById("cell_data3edit"+id).value;
      var x4 = document.getElementById("cell_data4edit"+id).value;
      
      var x5 = document.getElementById("cell_data5edit"+id).value;
      
      var selectElement = document.querySelector('#cell_data6edit'+id);
      var x6 = selectElement.value;
      
      //var x7 = document.getElementById("cell_data7edit"+id).value;
      //var x8 = document.getElementById("cell_data8edit"+id).value;
      //var x9 = document.getElementById("cell_data9edit"+id).value;
      //var x10 = document.getElementById("cell_data10edit"+id).value;
    
      
      var url2="{% url 'editFormTable' %}?"+
        "param=" + encodeURIComponent(x0) +
        "&param0=" + x0 +
        "&param1=" + encodeURIComponent(x1) +
        "&param2=" + encodeURIComponent(x2)+
        "&param3=" + encodeURIComponent(x3)+
        "&param4=" + encodeURIComponent(x4)+
        "&param5=" + encodeURIComponent(x5)+
        "&param6=" + encodeURIComponent(x6);

        
      window.location.href = url2;

  }
  </script>
  <!-- end redirect with param -->







  <!-- Vendor JS Files -->
 
  <script type="text/javascript" src="{% static 'vendor/apexcharts/apexcharts.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/chart.js/chart.umd.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/echarts/echarts.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/quill/quill.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/simple-datatables/simple-datatables.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/tinymce/tinymce.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/php-email-form/validate.js' %}"></script>

  

  <!-- Template Main JS File -->
  <script type="text/javascript" src="{% static 'js/main.js'%}"></script>

</body>

</html>

























<script>
                        
  function add_files_to_table(id,table,column) {
    var tab="#"+table+"_input_files_to_"+id


    // Get the selected files from the source input
    var sourceInput = document.getElementById(tab);
    var selectedFiles = sourceInput.files;

    // Clone the selected files
    var clonedFiles = Array.from(selectedFiles);

    // Set the cloned files in the target input
    var targetInput = document.getElementById("fileInput");
    targetInput.files = clonedFiles;
    

    document.getElementById('file_id').value = id;
    document.getElementById('column').value = column;

    var submitButton = document.getElementById("fileUploadForm");
    submitButton.submit();
    
    var form = document.getElementById("fileUploadForm");

    document.getElementById("submit_add_file_to_model").addEventListener("click", function () {
      form.submit();
    });



  }
  </script>





  <script>
                        
    function add_files_to_table(id,table,column) {
      // Get the selected files from the source input
      var tab="#"+table+"_input_files_to_"+id
      var sourceInput = document.getElementById(tab);
      var selectedFiles = sourceInput.files;

      // Clone the selected files
      var clonedFiles = Array.from(selectedFiles);

      // Set the cloned files in the target input
      var targetInput = document.getElementById("fileInput");
      targetInput.files = clonedFiles;
      

      document.getElementById('file_id').value = id;
      document.getElementById('column').value = column;

      // Append all selected files individually
      for (var i = 0; i < selectedFiles.length; i++) {
        formData.append("fileInput", selectedFiles[i]);
      }

      // Send a POST request to the server using the Fetch API
      fetch("{% url 'add_files_to_model' %}", {
        method: "POST",
        body: formData,
      })
        .then(function (response) {
          // Handle the response from the server if needed
          if (response.ok) {
            // Success
            console.log("Form submitted successfully");
          } else {
            // Error
            console.error("Form submission failed");
          }
        })
        .catch(function (error) {
          // Handle any errors that occurred during the fetch
          console.error("Fetch error: " + error.message);
    });

    }
    </script>


    <script>
    
      function add_files_to_table(id,table,column) {
        //var tab="#"+table+"_input_files_to_"+id
        var tab="#table1_input_files_to_"+id
        
    
        // Get the selected files from the source input
        var sourceInput = document.getElementById(tab);
        var selectedFiles = sourceInput.files;
    
        // Clone the selected files
        var clonedFiles = Array.from(selectedFiles);
    
        // Set the cloned files in the target input
        var targetInput = document.getElementById("fileInput");
        targetInput.files = clonedFiles;
        
    
        document.getElementById('file_id').value = id;
        document.getElementById('column').value = column;
    
        
        
        var form = document.getElementById("fileUploadForm");
    
        document.getElementById("submit_add_file_to_model").addEventListener("click", function () {
          form.submit();
        });
    
    
    
      }
    </script>

















<!---->
<input class="form-control" type="text" id="filterInput_1" placeholder="Search..." style="width:30%;min-width:100px;">
<div class="overflow-auto" style="padding:1px;">
<form method="post"  enctype="multipart/form-data">
{% csrf_token %}
<input type="hidden" name="myid" id="myid">
<input type="hidden" name="col_type" id="col_type">
<input type="hidden" name="mybutton" id="mybutton">
<table class="table  table-hover w-auto  table-bordered  table-borderless border-info fixed-header-table" id="tableDATA_1" cellspacing="0" >  <!-- table-sm  table-responsive-->

  <thead class="table-dark border-info ">
    <th class="fixed-column" ></th><!--style="width:auto;"-->
    <th data-sortable="true" data-column="id"  >id <span class="sortable-icon"  data-column="id"></span></th>
    <th data-sortable="true" data-column="nom"  >Nom <span class="sortable-icon"  data-column="nom"></span></th>  
    <th data-sortable="true" data-column="prenom" >Prénom <span class="sortable-icon"  data-column="prenom"></span></th> 
    <th data-sortable="true" data-column="adresse">Adresse <span class="sortable-icon"  data-column="adresse"></th> 
    <th>N° de tél</th> 
    <th>Visite technique</th> 
    <th class="w-50">État</th> 
    <th>Travaux à preconise</th> 
    <th>Audit v1</th> 
    <th>Audit v2</th> 
    <th>Audit v3</th> 
    <th>Audit fin</th> 
    
    
    <th>Coffrac</th> 
    <th>Paiement</th>
    <th>Agent</th>
    <th>Auditeur</th>

  </thead>
  <tbody id="myTable_1">
      {% for item in data %}
      {% if item.etat == "Modification Faite" or item.etat == "A modifier" or item.etat == "En cours" %}
      <input class="input_table_data" type="hidden" name="cell_data0" id="table1_hidden_id{{item.cell_id}}" value="{{item.cell_id}}">
      
      <tr>
          <td class="fixed-column fixed-column-backcolor" ><button  class="button_table_data " type="button" id="table1_edit_col" name="" value="" onclick="my_Func_edit_table_1('{{item.cell_id}}')"><i class="ri-edit-2-fill"></i></button></td>
          <td ><p style="width:auto;">{{ item.cell_id }}</p></td>
          <td class="td_input_cell" ><input class="input_table_data" type="text" name="table1_firstname" id="table1_firstname{{ item.cell_id }}" value="{{ item.firstname }}"  ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text" name="table1_lastname" id="table1_lastname{{ item.cell_id }}" value="{{ item.lastname }}"  ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text" name="table1_address" id="table1_address{{ item.cell_id }}" value="{{ item.address }}"  ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text" name="table1_num" id="table1_num{{ item.cell_id }}" value="{{ item.num }}"  ></td>  
          

          <td class="td_input_cell" > <!-- VT-->
            <nav class="header-nav ms-auto" >
              <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                <i class="ri-file-list-3-line"></i>
                
              </a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                
                   <!-- for i in datafiles  if item.cell_id == i.file_id -->
                {% for F in datafiles_VT %}
                
                  {% if F.file_id == item.cell_id %}
                  <li>
                    <li class="list-inline-item">
                      {% if F.file_format == "excel" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                      {% elif F.file_format == "pdf" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                      {% elif F.file_format == "image" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                      {% elif F.file_format == "word" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                      {% elif F.file_format == "pz2" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                      {% else %}
                        <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                      {% endif %}
                    </li>
                      
                      {{ F.file_name }}
                        
                    <li class="list-inline-item">
                      <button  class="button_table_data" type="button" id="" name="" value="" onclick="remove_file_from_m('{{item.cell_id}}','{{F.file_index}}','vt')">
                        <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                      </button>
                    </li>
                  </li>
                     
                   {% endif %}
                {% endfor %}
                <!-- <li style="text-align:center;height:20px;">
                     <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                     
                </li>-->
                <hr class="dropdown-divider">
                <li><input class="input_table_data" type="file" id="table3_input_files_to_{{ item.cell_id }}" name="table3_input_files_to_{{ item.cell_id }}" multiple></li>
                <input type="hidden" name="mybutton{{ item.cell_id }}" id="mybutton{{ item.cell_id }}">
                <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table3_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table3('{{item.cell_id}}','table1','vt')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                <li></li>
                

              </ul>


            </nav>
          </td>  <!--  target="_blank"-->
          
          <td class="badge-cell" data-state="badge">
            <span class="badge" data-badge="Modification Faite">Modification Faite</span>
            <span class="badge" data-badge="A modifier">A modifier</span>
            <span class="badge" data-badge="Annule">Annule</span>
            <span class="badge" data-badge="En cours">En cours</span>
            <span class="badge" data-badge="Fin">Fin</span>

            <select class="form-select" aria-label="Default select example"  name="cell_data6edit" id="table1_etat{{ item.cell_id }}" style="background-color:gray;">
                <option value="Modification Faite" style="background-color:cyan" {% if item.etat  == "Modification Faite" %}selected{% endif %}>Modification Faite</option>
                <option value="A modifier" style="background-color:gray;"  {% if item.etat  == "A modifier" %}selected{% endif %} >A modifier</option>
                <option value="Annule" style="background-color: red" {% if item.etat  == "Annule" %}selected{% endif %} >Annule</option>
                <option value="En cours" style="background-color:orange;" {% if item.etat  == "En cours" %}selected{% endif %} >En cours</option>
                <option value="Fin" style="background-color:green;" {% if item.etat  == "Fin" %}selected{% endif %} >Fin</option>
            </select>
          </td>


          <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>


          <td class="td_input_cell"> <!-- auditV1-->
            <nav class="header-nav ms-auto" >
              <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                <i class="ri-file-list-3-line"></i>
              </a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                
                   <!-- for i in datafiles  if item.cell_id == i.file_id -->
                {% for F in datafiles_AuditV1 %}
                
                  {% if F.file_id == item.cell_id %}
                  <li>
                    <li class="list-inline-item">
                      {% if F.file_format == "excel" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                      {% elif F.file_format == "pdf" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                      {% elif F.file_format == "image" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                      {% elif F.file_format == "word" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                      {% elif F.file_format == "pz2" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                      {% else %}
                        <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                      {% endif %}
                    </li>
                      
                      {{ F.file_name }}
                        
                    <li class="list-inline-item">
                      <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditV1')">
                        <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                      </button>
                    </li>
                  </li>
                     
                   {% endif %}
                {% endfor %}
                <!-- <li style="text-align:center;height:20px;">
                     <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                     
                </li>-->
                <hr class="dropdown-divider">
                <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
                <input type="hidden" name="mybutton{{ item.cell_id }}" id="mybutton{{ item.cell_id }}">
                <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table1','auditV1')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                <li></li>
                

              </ul>


            </nav>
          </td>


          <td class="td_input_cell"> <!-- auditV2-->
            <nav class="header-nav ms-auto" >
              <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                <i class="ri-file-list-3-line"></i>
              </a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                
                   <!-- for i in datafiles  if item.cell_id == i.file_id -->
                {% for F in datafiles_AuditV2 %}
                
                  {% if F.file_id == item.cell_id %}
                  <li>
                    <li class="list-inline-item">
                      {% if F.file_format == "excel" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                      {% elif F.file_format == "pdf" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                      {% elif F.file_format == "image" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                      {% elif F.file_format == "word" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                      {% elif F.file_format == "pz2" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                      {% else %}
                        <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                      {% endif %}
                    </li>
                      
                      {{ F.file_name }}
                        
                    <li class="list-inline-item">
                      <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditV2')">
                        <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                      </button>
                    </li>
                  </li>
                     
                   {% endif %}
                {% endfor %}
                <!-- <li style="text-align:center;height:20px;">
                     <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                     
                </li>-->
                <hr class="dropdown-divider">
                <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
                <input type="hidden" name="mybutton{{ item.cell_id }}" id="mybutton{{ item.cell_id }}">
                <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table1','auditV2')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                <li></li>
                

              </ul>


            </nav>
          </td>

          <td class="td_input_cell"> <!-- auditV3-->
            <nav class="header-nav ms-auto" >
              <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                <i class="ri-file-list-3-line"></i>
              </a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                
                   <!-- for i in datafiles  if item.cell_id == i.file_id -->
                {% for F in datafiles_AuditV3 %}
                
                  {% if F.file_id == item.cell_id %}
                  <li>
                    <li class="list-inline-item">
                      {% if F.file_format == "excel" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                      {% elif F.file_format == "pdf" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                      {% elif F.file_format == "image" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                      {% elif F.file_format == "word" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                      {% elif F.file_format == "pz2" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                      {% else %}
                        <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                      {% endif %}
                    </li>
                      
                      {{ F.file_name }}
                        
                    <li class="list-inline-item">
                      <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditV3')">
                        <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                      </button>
                    </li>
                  </li>
                     
                   {% endif %}
                {% endfor %}
                <!-- <li style="text-align:center;height:20px;">
                     <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                     
                </li>-->
                <hr class="dropdown-divider">
                <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
                <input type="hidden" name="mybutton{{ item.cell_id }}" id="mybutton{{ item.cell_id }}">
                <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table1','auditV3')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                <li></li>
                

              </ul>


            </nav>
          </td>


          <td class="td_input_cell"> <!-- auditFinal-->
            <nav class="header-nav ms-auto" >
              <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                <i class="ri-file-list-3-line"></i>
              </a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                
                   <!-- for i in datafiles  if item.cell_id == i.file_id -->
                {% for F in datafiles_AuditFinal %}
                
                  {% if F.file_id == item.cell_id %}
                  <li>
                    <li class="list-inline-item">
                      {% if F.file_format == "excel" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                      {% elif F.file_format == "pdf" %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                      {% elif F.file_format == "image" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                      {% elif F.file_format == "word" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                      {% elif F.file_format == "pz2" %}
                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                      {% else %}
                        <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                      {% endif %}
                    </li>
                      
                      {{ F.file_name }}
                        
                    <li class="list-inline-item">
                      <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditFinal')">
                        <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                      </button>
                    </li>
                  </li>
                     
                   {% endif %}
                {% endfor %}
                <!-- <li style="text-align:center;height:20px;">
                     <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                     
                </li>-->
                <hr class="dropdown-divider">
                <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
                <input type="hidden" name="mybutton{{ item.cell_id }}" id="mybutton{{ item.cell_id }}">
                <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table1','auditFinal')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                <li></li>
                

              </ul>


            </nav>
          </td>


          <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>

          
          <td class="td_input_cell td-form-check-checkbox" >
            <input class="form-check-input form-check-checkbox" type="checkbox" value="True" id="paiement{{ item.cell_id }}" {% if  item.paiement %}  checked  {% endif %}>
          </td>

      </tr>
      {% endif %}
      {% endfor %}

  </tbody>
  <tfoot>
      <tr>
          <td class="fixed-column fixed-column-backcolor" ><button type="submit" class="button_table_data" style="text-align:left;" function=myFunctionadd()><i class="ri-add-circle-line">Add</i></button></td>
          <td></td>
          <td class="td_input_cell "> <input class="input_table_data" type="text" name="cell_data1add"  ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data2add" ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data3add" ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4add" ></td>



                
          <td class="td_input_cell"></td>


          
          <td class="badge-cellfoot" data-state="badgefoot">
            <span class="badgefoot" data-badgefoot="Modification Faite">Modification Faite</span>
            <span class="badgefoot" data-badgefoot="Payer">Payer</span>
            <span class="badgefoot" data-badgefoot="A modifier">A modifier</span>
            <span class="badgefoot" data-badgefoot="Annule">Annule</span>
            <span class="badgefoot" data-badgefoot="En cours">En cours</span>
            <span class="badgefoot" data-badgefoot="Fin">Fin</span>

            <select class="form-selectfoot" aria-label="Default select example" name="cell_data6add" style="background-color:gray;">
                <option value="Modification Faite" style="background-color:cyan" >Modification Faite</option>
                <option value="Payer" style="background-color:purple;">Payer</option>
                <option value="A modifier" style="background-color:gray;">A modifier</option>
                <option value="Annule" style="background-color:red">Annule</option>
                <option value="En cours" style="background-color:orange;" selected>En cours</option>
                <option value="Fin" style="background-color:green;">Fin</option>
            </select>
          </td>



          <td class="td_input_cell"></td>
          <td class="td_input_cell"></td>
          <td class="td_input_cell"></td>
          <td class="td_input_cell"></td>
          <td class="td_input_cell"></td>
          <td class="td_input_cell"></td>
          <td class="td_input_cell"></td>
          
          
          
      </tr>
  </tfoot>
</table>
<!--{} form.as_p -->
<!--<button class="btn ri-add-fill"></button>-->

</form>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- redirect with param -->
<script>
  
function my_Func_edit_table_1(id) {

var x0 = document.getElementById("table1_hidden_id"+id).value;
var x1 = document.getElementById("table1_firstname"+id).value;
var x2 = document.getElementById("table1_lastname"+id).value;
var x3 = document.getElementById("table1_address"+id).value;
var x4 = document.getElementById("table1_num"+id).value;

var selectElement = document.querySelector('#table1_etat'+id);
var x6 = selectElement.value;
var x7 = document.getElementById("paiement"+id).value;
//var x7 = document.getElementById("cell_data7edit"+id).value;
//var x8 = document.getElementById("cell_data8edit"+id).value;
//var x9 = document.getElementById("cell_data9edit"+id).value;
//var x10 = document.getElementById("cell_data10edit"+id).value;


var url2="{% url 'editFormTable' %}?"+
  "param=" + encodeURIComponent(x0) +
  "&param0=" + x0 +
  "&param1=" + encodeURIComponent(x1) +
  "&param2=" + encodeURIComponent(x2)+
  "&param3=" + encodeURIComponent(x3)+
  "&param4=" + encodeURIComponent(x4)+
  "&param6=" + encodeURIComponent(x6)+
  "&param7=" + encodeURIComponent(x7);

  
window.location.href = url2;

}
</script>
<!-- end redirect with param -->

</div>
</div>
</div><!-- End Recent Sales -->
</div>
<!--  ======================================================== end table 1 ===============================================================  -->
<!--  ======================================================== end table 1 ===============================================================  -->
<!--  ======================================================== end table 1 ===============================================================  -->





<!--  ======================================================== start table 2 ===============================================================  -->
<!--  ======================================================== start table 2 ===============================================================  -->
<!--  ======================================================== start table 2 ===============================================================  -->
<!--  ======================================================== start table 2 ===============================================================  -->
<!-- Recent Sales -->
<div class="row">

<div class="col-12">
<div class="card recent-sales overflow-auto">

<div class="filter">
<a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
<ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
<li class="dropdown-header text-start">
<h6>Filter</h6>
</li>

<li><a class="dropdown-item" href="#">Today</a></li>
<li><a class="dropdown-item" href="#">This Month</a></li>
<li><a class="dropdown-item" href="#">This Year</a></li>
</ul>
</div>

<div class="card-body" >
<h5 class="card-title">Title <span>| title</span></h5>



<input class="form-control" type="text" id="filterInput_2" placeholder="Search..." style="width:30%;min-width:100px;">
<form method="post"  enctype="multipart/form-data">
{% csrf_token %}
<table class="table  table-hover   table-bordered  table-borderless border-info " id="tableDATA_2" cellspacing="0" >  <!-- table-sm  table-responsive-->

  <thead class="table-dark border-info">
    <th></th><!--style="width:auto;"-->
    <th >id <span class="sortable-icon"  data-column="id"></span></th>
    <th >Nom <span class="sortable-icon"  data-column="nom"></span></th>  
    <th >Prénom <span class="sortable-icon"  data-column="prenom"></span></th> 
    <th >Adresse <span class="sortable-icon"  data-column="adresse"></th> 
    <th>N° de tél</th> 
    <th>Visite technique</th> 
    <th>État</th> 
    <th>Travaux à preconise</th> 
    <th>Audit v1</th> 
    <th>Audit v2</th> 
    <th>Audit v3</th> 
    <th>Audit fin</th> 
    <th>Coffrac</th> 
    <th>Payer</th>
    <th>Agent</th>
    <th>Auditeur</th>

  </thead>
  <tbody id="myTable_2">
      {% for item in data %}
      {% if item.etat == "Annule"%}
      <input class="input_table_data" type="hidden" name="cell_data0" id="table2_hidden_id{{item.cell_id}}" value="{{item.cell_id}}">
    <tr>
        <td style="width:auto;"><button  class="button_table_data" type="button" id="table2_edit_col" name="" value="" onclick="my_Func_edit_table_2('{{item.cell_id}}') "><i class="ri-edit-2-fill"></i></button></td>
        <td ><p style="width:auto;">{{ item.cell_id }}</p></td>
        <td class="td_input_cell" ><input class="input_table_data" type="text" name="table2_firstname" id="table2_firstname{{ item.cell_id }}" value="{{ item.firstname }}"  ></td>
        <td class="td_input_cell"><input class="input_table_data" type="text" name="table2_lastname" id="table2_lastname{{ item.cell_id }}" value="{{ item.lastname }}"  ></td>
        <td class="td_input_cell"><input class="input_table_data" type="text" name="table2_address" id="table2_address{{ item.cell_id }}" value="{{ item.address }}"  ></td>
        <td class="td_input_cell"><input class="input_table_data" type="text" name="table2_num" id="table2_num{{ item.cell_id }}" value="{{ item.num }}"  ></td>  
        
        <td class="td_input_cell" > <!-- VT-->
          <nav class="header-nav ms-auto" >
            <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
              <i class="ri-file-list-3-line"></i>
              
            </a>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
              
                 <!-- for i in datafiles  if item.cell_id == i.file_id -->
              {% for F in datafiles_VT %}
              
                {% if F.file_id == item.cell_id %}
                <li>
                  <li class="list-inline-item">
                    {% if F.file_format == "excel" %}
                    <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                    {% elif F.file_format == "pdf" %}
                    <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                    {% elif F.file_format == "image" %}
                      <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                    {% elif F.file_format == "word" %}
                      <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                    {% elif F.file_format == "pz2" %}
                      <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                    {% else %}
                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                    {% endif %}
                  </li>
                    
                    {{ F.file_name }}
                      
                  <li class="list-inline-item">
                    <button  class="button_table_data" type="button" id="" name="" value="" onclick="remove_file_from_m('{{item.cell_id}}','{{F.file_index}}','vt')">
                      <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                    </button>
                  </li>
                </li>
                   
                 {% endif %}
              {% endfor %}
              <!-- <li style="text-align:center;height:20px;">
                   <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                   
              </li>-->
              <hr class="dropdown-divider">
              <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
              <input type="hidden" name="mybutton{{ item.cell_id }}" id="mybutton{{ item.cell_id }}">
              <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table2','vt')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
              <li></li>
              

            </ul>


          </nav>
        </td> <!--  target="_blank"-->
        
          <td class="badge-cellfoot" data-state="badge">
            <span class="badge" data-badge="Modification Faite">Modification Faite</span>
            <span class="badge" data-badge="Payer">Payer</span>
            <span class="badge" data-badge="A modifier">A modifier</span>
            <span class="badge" data-badge="Annule">Annule</span>
            <span class="badge" data-badge="En cours">En cours</span>
            <span class="badge" data-badge="Fin">Fin</span>

            <select class="form-select" aria-label="Default select example"  name="cell_data6edit" id="table2_etat{{ item.cell_id }}" style="background-color:gray;">
                <option value="Modification Faite" style="background-color:cyan" {% if item.etat  == "Modification Faite" %}selected{% endif %}>Modification Faite</option>
                <option value="Payer" style="background-color:purple;" {% if item.etat  == "Payer" %}selected{% endif %} >Payer</option>
                <option value="A modifier" style="background-color:gray;"  {% if item.etat  == "A modifier" %}selected{% endif %} >A modifier</option>
                <option value="Annule" style="background-color: red" {% if item.etat  == "Annule" %}selected{% endif %} >Annule</option>
                <option value="En cours" style="background-color:orange;" {% if item.etat  == "En cours" %}selected{% endif %} >En cours</option>
                <option value="Fin" style="background-color:green;" {% if item.etat  == "Fin" %}selected{% endif %} >Fin</option>
            </select>
          </td>


          <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text"  ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text" ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>
          <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>

      </tr>
      {% endif %}
      {% endfor %}

  </tbody>
</table>
<!--{} form.as_p -->
<!--<button class="btn ri-add-fill"></button>-->

</form>