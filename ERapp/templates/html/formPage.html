{% load static %}
{% load l10n %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title></title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->


  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">


  <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css"> 
  

  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/quill/quill.snow.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/quill/quill.bubble.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/remixicon/remixicon.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/simple-datatables/style.css' %}" rel="stylesheet">
  <script>
    
      
    
    </script>
    
</head>

<body onload="load()">
  {% if user.is_authenticated  %} <!-- and "admin" in user.role -->

  <input  type="hidden" name="user_email" id="user_email" value="{{ user.email }}">
  <input  type="hidden" name="user_firstname" id="user_firstname" value="{{user.first_name}}">
  <input  type="hidden" name="user_lastname" id="user_lastname" value="{{user.last_name}}">
  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">
    
    <div class="d-flex align-items-center justify-content-between">
      <a href="/home" class="logo d-flex align-items-center">
        <!--<img src="{% static 'image\default_user_avatar.png' %}" alt="">-->
        <span class="d-none d-lg-block">Énergie Renouvelable</span>
      </a>
      <i class="bi bi-list toggle-sidebar-btn " id="click_side_bar"></i>
    </div><!-- End Logo -->

    <!-- <div class="search-bar">
      <form class="search-form d-flex align-items-center" method="POST" action="#">
        <input type="text" name="query" placeholder="Search" title="Enter search keyword">
        <button type="submit" title="Search"><i class="bi bi-search"></i></button>
      </form>
    </div> -->

    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">

        <li class="nav-item d-block d-lg-none">
          <a class="nav-link nav-icon search-bar-toggle " href="#">
            <i class="bi bi-search"></i>
          </a>
        </li><!-- End Search Icon-->

        <li class="nav-item dropdown pe-3">

          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
            <img src="{{ user.profile_pic.url }}"  alt="Image">
            <span class="d-none d-md-block dropdown-toggle ps-2">{{ user.first_name }} {{ user.last_name }} </span>
          </a><!-- End Profile Iamge Icon -->

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
            <li class="dropdown-header">
              <h6>{{ user.first_name }} {{ user.last_name }}</h6>
              <span></span>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li>
              <a class="dropdown-item d-flex align-items-center" href="/profile/">
                <i class="bi bi-person"></i>
                <span>My Profile</span>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>

            <li>
              <a class="dropdown-item d-flex align-items-center" href="/logout/">
                <i class="bi bi-box-arrow-right"></i>
                <span>Sign Out</span>
              </a>
            </li>

          </ul><!-- End Profile Dropdown Items -->
        </li><!-- End Profile Nav -->

      </ul>
    </nav><!-- End Icons Navigation -->

  </header><!-- End Header -->

  <!-- ======= Sidebar =================================================================================================================================================================== -->
  <!-- ======= Sidebar =================================================================================================================================================================== -->

  <aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">

      <li class="nav-item">
        <a class="nav-link " href="index.html">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li><!-- End Dashboard Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#components-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-menu-button-wide"></i><span>Components</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="components-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          <li>
            <a href="components-alerts.html">
              <i class="bi bi-circle"></i><span>Alerts</span>
            </a>
          </li>
          <li>
            <a href="components-accordion.html">
              <i class="bi bi-circle"></i><span>Accordion</span>
            </a>
          </li>
          
        </ul>
      </li><!-- End Components Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#forms-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-journal-text"></i><span>Forms</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="forms-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          <li>
            <a href="forms-elements.html">
              <i class="bi bi-circle"></i><span>Form Elements</span>
            </a>
          </li>
          <li>
            <a href="forms-layouts.html">
              <i class="bi bi-circle"></i><span>Form Layouts</span>
            </a>
          </li>
          <li>
            <a href="forms-editors.html">
              <i class="bi bi-circle"></i><span>Form Editors</span>
            </a>
          </li>
          <li>
            <a href="forms-validation.html">
              <i class="bi bi-circle"></i><span>Form Validation</span>
            </a>
          </li>
        </ul>
      </li><!-- End Forms Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#tables-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-layout-text-window-reverse"></i><span>Tables</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="tables-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          <li>
            <a href="tables-general.html">
              <i class="bi bi-circle"></i><span>General Tables</span>
            </a>
          </li>
          <li>
            <a href="tables-data.html">
              <i class="bi bi-circle"></i><span>Data Tables</span>
            </a>
          </li>
        </ul>
      </li><!-- End Tables Nav -->


      <li class="nav-heading">Pages</li>


      <li class="nav-item">
        <a class="nav-link collapsed" href="pages-faq.html">
          <i class="bi bi-question-circle"></i>
          <span>F.A.Q</span>
        </a>
      </li><!-- End F.A.Q Page Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="pages-contact.html">
          <i class="bi bi-envelope"></i>
          <span>Contact</span>
        </a>
      </li><!-- End Contact Page Nav -->

    </ul>

  </aside><!-- End Sidebar-->
  <!-- End Sidebar ==========================================================================================================================-->


  <!-- main Page ========================================================================================================================================     -->
  <main id="main" class="main">
    <div style="display:;">
    <form id="fileUploadForm" enctype="multipart/form-data" method="POST" >
      {% csrf_token %}
      <input type="file" id="fileInput" name="fileInput" style="display:none" multiple>
      <input type="text" name="file_id" id="file_id" style="display:none">
      <input type="text" name="column" id="column" style="display:none">
      <button id="submit_add_file_to_model" type="submit" style="display:none"></button>
    </form>

  </div>
    <div class="pagetitle">
      <h1>Dashboard</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item active">Dashboard</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section dashboard">
      <div class="row">

        


         <!--  ======================================================== start table 1 ===============================================================  -->
         <!--  ======================================================== start table 1 ===============================================================  -->
         <!--  ======================================================== start table 1 ===============================================================  -->
         <!--  ======================================================== start table 1 ===============================================================  -->
         <!--  ======================================================== start table 1 ===============================================================  -->

            <!-- Recent Sales -->
          <div class="row">
           
            <div class="col-12">
              <div class="card recent-sales">
                <div class="reduce_div">
                  <button class="reduce_table_size" type="button" style="width:40px;height:40px;"><i class=" ri-arrow-down-s-line fa-3x" ></i></butoon>
                </div>

                <div class="card-body">
                  <h5 class="card-title">Title <span>| title</span></h5>

                  <input class="form-control" type="text" id="filterInput_1" placeholder="Search..." style="width:30%;min-width:100px;">
                  <div class="formT_div_for_table overflow-scroll">
                  <form method="post"  enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="hidden" name="myid1" id="myid1">
                    <input type="hidden" name="col_type1" id="col_type1">
                    <input type="hidden" name="mybutton1" id="mybutton1">

                    <table class="table  table-hover  table-bordered  table-borderless border-info fixed-header-table " id="tableDATA_1" cellspacing="0" >  <!-- table-sm  table-responsive-->

                        <thead class="table-dark border-info ">
                          <th class="fixed-column" ></th><!--style="width:auto;"-->
                          <th data-sortable="true" data-column="id"  >id <span class="sortable-icon"  data-column="id"></span></th>
                          <th>Prénom</th>  
                          <th>Nom</th> 
                          <th data-sortable="true" data-column="adresse">Adresse <span class="sortable-icon"  data-column="adresse"></th> 
                          <th>N° de tél</th> 
                          <th colspan=2>Visite technique</th> 
                          <th >État</th> 
                          <th>Travaux à preconise</th> 
                          <th>Audit v1</th> 
                          <th>Audit v2</th> 
                          <th>Audit v3</th> 
                          <th>Audit fin</th> 
                          
                          
                          <th>Coffrac</th> 
                          <th>Paiement</th>
                          <th>Agent</th>
                          <th>Auditeur</th>
                          <th>Date de création</th>

                        </thead>
                        <tbody id="myTable_1">
                            {% for item in data %}
                            {% if item.etat == "Modification Faite" or item.etat == "A modifier" or item.etat == "En cours" or item.etat == "A realiser" or item.etat == "Reclamation" or item.etat == "Reclamation Faite" or item.etat == "Envoye" %}
                            <input  type="hidden" name="cell_data0" id="table1_hidden_id{{item.cell_id}}" value="{{item.cell_id}}">
                            
                            <tr>
                                <td class="fixed-column fixed-column-backcolor" ><button  class="button_table_data " type="button" id="table1_edit_col" name="" value="" onclick="my_Func_edit_table_1('{{item.cell_id}}')"><i class="ri-edit-2-fill"></i></button></td>
                                <td ><p style="width:auto;">{{ item.cell_id }}</p></td>
                                <td class="td_input_cell" ><input class="input_table_data" type="text" name="table1_firstname" id="table1_firstname{{ item.cell_id }}" value="{{ item.firstname }}"  ></td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="table1_lastname" id="table1_lastname{{ item.cell_id }}" value="{{ item.lastname }}"  ></td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="table1_address" id="table1_address{{ item.cell_id }}" value="{{ item.address }}"  ></td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="table1_num" id="table1_num{{ item.cell_id }}" value="{{ item.num }}"  ></td>  
                                

                                <td class="td_input_cell" > <!-- VT-->
                                  <nav class="header-nav ms-auto" >
                                    <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                      <i class="ri-file-list-3-line"></i>
                                      
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                      
                                         <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                      {% for F in datafiles_VT %}
                                      
                                        {% if F.file_id == item.cell_id %}
                                        <li>
                                          <li class="list-inline-item">
                                            {% if F.file_format == "excel" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                            {% elif F.file_format == "pdf" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                            {% elif F.file_format == "image" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                            {% elif F.file_format == "word" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                            {% elif F.file_format == "pz2" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                            {% else %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                            {% endif %}
                                          </li>
                                            
                                            {{ F.file_name }}
                                              
                                          <li class="list-inline-item">
                                            <button  class="button_table_data" type="button" id="" name="" value="" onclick="remove_file_from_m('{{item.cell_id}}','{{F.file_index}}','vt')">
                                              <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                            </button>
                                          </li>
                                        </li>
                                           
                                         {% endif %}
                                      {% endfor %}
                                      <!-- <li style="text-align:center;height:20px;">
                                           <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                                           
                                      </li>-->
                                      <hr class="dropdown-divider">
                                      <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
                                      <input type="hidden" name="mybutton1{{ item.cell_id }}" id="mybutton1{{ item.cell_id }}">
                                      <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table1','vt')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                      <li></li>
                                      

                                    </ul>


                                  </nav>
                                </td> 
                                <td>
                                  <a href="{% url 'download_K_file' file_id=item.cell_id %}" class="button_table_data" style="color:green;"><i class="bi bi-filetype-xlsx fa-2x"></i></a>
                                </td>  <!--  target="_blank"-->
                                
                                <td class="badge-cell" data-state="badge">

                                  <span class="badge" data-badge="A realiser">A réaliser</span>
                                  <span class="badge" data-badge="En cours">En cours</span>
                                  <span class="badge" data-badge="A modifier">A modifier</span>
                                  <span class="badge" data-badge="Modification Faite">Modification Faite</span>
                                  <span class="badge" data-badge="Reclamation">Reclamation</span>
                                  <span class="badge" data-badge="Reclamation Faite">Réclamation Faite</span>
                                  <span class="badge" data-badge="Envoye">Envoyé</span>
                                  <span class="badge" data-badge="Annule">Annule</span>
                                  <span class="badge" data-badge="Fini">Fini</span>

                                  <select class="form-select" aria-label="Default select example"  name="cell_data6edit" id="table1_etat{{ item.cell_id }}" style="background-color:gray;">
                                      <option value="A realiser" {% if item.etat  == "A realiser" %}selected{% endif %}>A réaliser</option>
                                      <option value="En cours"  {% if item.etat  == "En cours" %}selected{% endif %} >En cours</option>
                                      <option value="A modifier"  {% if item.etat  == "A modifier" %}selected{% endif %} >A modifier</option>
                                      <option value="Modification Faite" {% if item.etat  == "Modification Faite" %}selected{% endif %}>Modification faite</option>
                                      <option value="Reclamation" {% if item.etat  == "Reclamation" %}selected{% endif %} >Réclamation</option>
                                      <option value="Reclamation Faite"  {% if item.etat  == "Reclamation Faite" %}selected{% endif %} >Réclamation faite</option>
                                      <option value="Envoye"   {% if item.etat  == "Envoye" %}selected{% endif %} >Envoyé</option>
                                      <option value="Annule" {% if item.etat  == "Annule" %}selected{% endif %} >Annule</option>
                                      <option value="Fini"  {% if item.etat  == "Fini" %}selected{% endif %} >Fini</option>
                                  </select>
                                </td>


                                <td class="td_input_cell">
                                
                                 <nav class="header-nav ms-auto" >
                                  <li class="nav-item dropdown" style="list-style-type: none;">
                                   
                                    <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
                                      <i class="bi bi-chat-left-text"></i>
                                      
                                    </a><!-- End Messages Icon -->
                          
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages overflow-y-auto" style="max-height:200px;width:400px;">
                                      <li class="dropdown-header">
                                        <input type="text" name="input_msg_{{item.cell_id}}" id="input_msg_{{item.cell_id}}" style="width:90%;">
                                        <button class="style_none_border style_background_transparent" type="button" id="send_msg_1" onclick="send_message_box('{{item.cell_id}}','1')" > <i class="bi bi-send" ></i></button>
                                        <a><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
                                      </li>
                                      <li>
                                        <hr class="dropdown-divider">
                                      </li>
                                      {% for msg in message_box_1 reversed  %}
                                      {% if item.cell_id == msg.row_id %}
                                        <li class="message-item">
                                          <a>
                                            {% if user.profile_pic %}  
                                              <img src="{{ user.profile_pic.url }}" alt="Image"  class="rounded-circle">  <!-- alt="image.title"-->
                                            {% else %}
                                              <img src="{% static 'image/default_user_avatar.png' %}" alt="Image" class="rounded-circle">
                                            {% endif %}
                                            <div>
                                              <h4>{{ msg.username }}</h4>
                                              <p>{{ msg.message }}</p>
                                              <p>{{ msg.message_date|naturaltime }}</p>
                                            </div>
                                          </a>
                                        </li>
                                        <li>
                                          <hr class="dropdown-divider">
                                        </li>
                                        {% endif %}
                                      {% endfor %}
                          
                                    </ul><!-- End Messages Dropdown Items -->
                          
                                  </li><!-- End Messages Nav -->
                                </nav>
                                
                                
                                </td>


                                <td class="td_input_cell"> <!-- auditV1-->
                                  <nav class="header-nav ms-auto" >
                                    <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                      <i class="ri-file-list-3-line"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                      
                                         <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                      {% for F in datafiles_AuditV1 %}
                                      
                                        {% if F.file_id == item.cell_id %}
                                        <li>
                                          <li class="list-inline-item">
                                            {% if F.file_format == "excel" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                            {% elif F.file_format == "pdf" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                            {% elif F.file_format == "image" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                            {% elif F.file_format == "word" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                            {% elif F.file_format == "pz2" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                            {% else %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                            {% endif %}
                                          </li>
                                            
                                            {{ F.file_name }}
                                              
                                          <li class="list-inline-item">
                                            <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditV1')">
                                              <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                            </button>
                                          </li>
                                        </li>
                                           
                                         {% endif %}
                                      {% endfor %}
                                      <!-- <li style="text-align:center;height:20px;">
                                           <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                                           
                                      </li>-->
                                      <hr class="dropdown-divider">
                                      <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
                                      <input type="hidden" name="mybutton1{{ item.cell_id }}" id="mybutton1{{ item.cell_id }}">
                                      <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table1','auditV1')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                      <li></li>
                                      

                                    </ul>


                                  </nav>
                                </td>


                                <td class="td_input_cell"> <!-- auditV2-->
                                  <nav class="header-nav ms-auto" >
                                    <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                      <i class="ri-file-list-3-line"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                      
                                         <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                      {% for F in datafiles_AuditV2 %}
                                      
                                        {% if F.file_id == item.cell_id %}
                                        <li>
                                          <li class="list-inline-item">
                                            {% if F.file_format == "excel" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                            {% elif F.file_format == "pdf" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                            {% elif F.file_format == "image" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                            {% elif F.file_format == "word" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                            {% elif F.file_format == "pz2" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                            {% else %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                            {% endif %}
                                          </li>
                                            
                                            {{ F.file_name }}
                                              
                                          <li class="list-inline-item">
                                            <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditV2')">
                                              <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                            </button>
                                          </li>
                                        </li>
                                           
                                         {% endif %}
                                      {% endfor %}
                                      <!-- <li style="text-align:center;height:20px;">
                                           <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                                           
                                      </li>-->
                                      <hr class="dropdown-divider">
                                      <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
                                      <input type="hidden" name="mybutton1{{ item.cell_id }}" id="mybutton1{{ item.cell_id }}">
                                      <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table1','auditV2')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                      <li></li>
                                      

                                    </ul>


                                  </nav>
                                </td>

                                <td class="td_input_cell"> <!-- auditV3-->
                                  <nav class="header-nav ms-auto" >
                                    <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                      <i class="ri-file-list-3-line"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                      
                                         <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                      {% for F in datafiles_AuditV3 %}
                                      
                                        {% if F.file_id == item.cell_id %}
                                        <li>
                                          <li class="list-inline-item">
                                            {% if F.file_format == "excel" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                            {% elif F.file_format == "pdf" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                            {% elif F.file_format == "image" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                            {% elif F.file_format == "word" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                            {% elif F.file_format == "pz2" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                            {% else %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                            {% endif %}
                                          </li>
                                            
                                            {{ F.file_name }}
                                              
                                          <li class="list-inline-item">
                                            <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditV3')">
                                              <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                            </button>
                                          </li>
                                        </li>
                                           
                                         {% endif %}
                                      {% endfor %}
                                      <!-- <li style="text-align:center;height:20px;">
                                           <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                                           
                                      </li>-->
                                      <hr class="dropdown-divider">
                                      <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
                                      <input type="hidden" name="mybutton1{{ item.cell_id }}" id="mybutton1{{ item.cell_id }}">
                                      <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table1','auditV3')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                      <li></li>
                                      

                                    </ul>


                                  </nav>
                                </td>


                                <td class="td_input_cell"> <!-- auditFinal-->
                                  <nav class="header-nav ms-auto" >
                                    <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                      <i class="ri-file-list-3-line"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                      
                                         <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                      {% for F in datafiles_AuditFinal %}
                                      
                                        {% if F.file_id == item.cell_id %}
                                        <li>
                                          <li class="list-inline-item">
                                            {% if F.file_format == "excel" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                            {% elif F.file_format == "pdf" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                            {% elif F.file_format == "image" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                            {% elif F.file_format == "word" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                            {% elif F.file_format == "pz2" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                            {% else %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                            {% endif %}
                                          </li>
                                            
                                            {{ F.file_name }}
                                              
                                          <li class="list-inline-item">
                                            <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditFinal')">
                                              <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                            </button>
                                          </li>
                                        </li>
                                           
                                         {% endif %}
                                      {% endfor %}
                                      <!-- <li style="text-align:center;height:20px;">
                                           <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                                           
                                      </li>-->
                                      <hr class="dropdown-divider">
                                      <li><input class="input_table_data" type="file" id="table1_input_files_to_{{ item.cell_id }}" name="table1_input_files_to_{{ item.cell_id }}" multiple></li>
                                      <input type="hidden" name="mybutton1{{ item.cell_id }}" id="mybutton1{{ item.cell_id }}">
                                      <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table('{{item.cell_id}}','table1','auditFinal')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                      <li></li>
                                      

                                    </ul>


                                  </nav>
                                </td>


                                <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>

                                
                                <td class="td_input_cell td-form-check-checkbox" >
                                  <input class="form-check-input form-check-checkbox" type="checkbox" value="True" id="paiement{{ item.cell_id }}"  {% if  item.paiement  %} Checked {% endif %}>
                                </td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4add" ></td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4add" ></td>
                                <td><p>{{ item.creation_time|date:_("d m Y H:i") }} </p></td>
                            </tr>
                            
                            {% endif %}
                            {% endfor %}

                        </tbody>
                        
                    </table>
                    <!--{} form.as_p -->
                    <!--<button class="btn ri-add-fill"></button>-->
                    
                </form>
              </div>
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

                <!-- redirect with param -->
                <script>
                        
                  function my_Func_edit_table_1(id) {
                    
                    var x0 = document.getElementById("table1_hidden_id"+id).value;
                    var x1 = document.getElementById("table1_firstname"+id).value;
                    var x2 = document.getElementById("table1_lastname"+id).value;
                    var x3 = document.getElementById("table1_address"+id).value;
                    var x4 = document.getElementById("table1_num"+id).value;

                    var selectElement = document.querySelector('#table1_etat'+id);
                    var x6 = selectElement.value;
                    var x7 = document.getElementById("paiement"+id);
                      //var x7 = document.getElementById("cell_data7edit"+id).value;
                      //var x8 = document.getElementById("cell_data8edit"+id).value;
                      //var x9 = document.getElementById("cell_data9edit"+id).value;
                      //var x10 = document.getElementById("cell_data10edit"+id).value;
                    
                      if (x7.checked) {
                        x7="True";
                      } else {
                        x7="False";
                      }
                      var url2="{% url 'editFormTable' %}?"+
                        "param=" + encodeURIComponent(x0) +
                        "&param0=" + x0 +
                        "&param1=" + encodeURIComponent(x1) +
                        "&param2=" + encodeURIComponent(x2)+
                        "&param3=" + encodeURIComponent(x3)+
                        "&param4=" + encodeURIComponent(x4)+
                        "&param6=" + encodeURIComponent(x6)+
                        "&param7=" + encodeURIComponent(x7);

                        
                      window.location.href = url2;

                  }
                  </script>
                  <!-- end redirect with param -->

                </div>
              </div>
            </div><!-- End Recent Sales -->
          </div>
          <!--  ======================================================== end table 1 ===============================================================  -->
          <!--  ======================================================== end table 1 ===============================================================  -->
          <!--  ======================================================== end table 1 ===============================================================  -->





          <!--  ======================================================== start table 2 ===============================================================  -->
          <!--  ======================================================== start table 2 ===============================================================  -->
          <!--  ======================================================== start table 2 ===============================================================  -->
          <!--  ======================================================== start table 2 ===============================================================  -->
            <!-- Recent Sales -->
          <div class="row">
           
            <div class="col-12">
              
              <div class="card recent-sales">
                <div class="reduce_div">
                  <button class="reduce_table_size" type="button" style="width:40px;height:40px;"><i class=" ri-arrow-down-s-line fa-3x" ></i></butoon>
                </div>

                <div class="card-body">
                  <h5 class="card-title">Title <span>| title</span></h5>

                  
                  
                  <input class="form-control" type="text" id="filterInput_2" placeholder="Search..." style="width:30%;min-width:100px;">
                    <div class="overflow-auto" style="padding:1px;">
                    <form method="post"  enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="hidden" name="myid2" id="myid2">
                    <input type="hidden" name="col_type2" id="col_type2">
                    <input type="hidden" name="mybutton2" id="mybutton2">

                    <table class="table  table-hover   table-bordered  table-borderless border-info " id="tableDATA_2" cellspacing="0" >  <!-- table-sm  table-responsive-->

                        <thead class="table-dark border-info">
                          <th class="fixed-column"></th><!--style="width:auto;"-->
                          <th >id <span class="sortable-icon"  data-column="id"></span></th>
                          <th>Prénom</th>  
                          <th>Nom</th> 
                          <th >Adresse <span class="sortable-icon"  data-column="adresse"></th> 
                          <th>N° de tél</th> 
                          <th>Visite technique</th> 
                          <th >État</th> 
                          <th>Travaux à preconise</th> 
                          <th>Audit v1</th> 
                          <th>Audit v2</th> 
                          <th>Audit v3</th> 
                          <th>Audit fin</th> 
                          <th>Coffrac</th> 
                          <th>Paiement</th>
                          <th>Agent</th>
                          <th>Auditeur</th>
                          <th>Date de création</th>
                        </thead>
                        <tbody id="myTable_2">
                            {% for item in data %}
                            {% if item.etat == "Annule"%}
                            <input class="input_table_data" type="hidden" name="cell_data0" id="table2_hidden_id{{item.cell_id}}" value="{{item.cell_id}}">
                          <tr>
                              <td class="fixed-column fixed-column-backcolor"><button  class="button_table_data" type="button" id="table2_edit_col" name="" value="" onclick="my_Func_edit_table_2('{{item.cell_id}}') "><i class="ri-edit-2-fill"></i></button></td>
                              <td ><p style="width:auto;">{{ item.cell_id }}</p></td>
                              <td class="td_input_cell" ><input class="input_table_data" type="text" name="table2_firstname" id="table2_firstname{{ item.cell_id }}" value="{{ item.firstname }}"  ></td>
                              <td class="td_input_cell"><input class="input_table_data" type="text" name="table2_lastname" id="table2_lastname{{ item.cell_id }}" value="{{ item.lastname }}"  ></td>
                              <td class="td_input_cell"><input class="input_table_data" type="text" name="table2_address" id="table2_address{{ item.cell_id }}" value="{{ item.address }}"  ></td>
                              <td class="td_input_cell"><input class="input_table_data" type="text" name="table2_num" id="table2_num{{ item.cell_id }}" value="{{ item.num }}"  ></td>  
                              
                              <td class="td_input_cell" > <!-- VT-->
                                <nav class="header-nav ms-auto" >
                                  <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                    <i class="ri-file-list-3-line"></i>
                                    
                                  </a>
                                  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                    
                                       <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                    {% for F in datafiles_VT %}
                                    
                                      {% if F.file_id == item.cell_id %}
                                      <li>
                                        <li class="list-inline-item">
                                          {% if F.file_format == "excel" %}
                                          <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                          {% elif F.file_format == "pdf" %}
                                          <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                          {% elif F.file_format == "image" %}
                                            <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                          {% elif F.file_format == "word" %}
                                            <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                          {% elif F.file_format == "pz2" %}
                                            <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                          {% else %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                          {% endif %}
                                        </li>
                                          
                                          {{ F.file_name }}
                                            
                                        <li class="list-inline-item">
                                          <button  class="button_table_data" type="button" id="" name="" value="" onclick="remove_file_from_m('{{item.cell_id}}','{{F.file_index}}','vt')">
                                            <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                          </button>
                                        </li>
                                      </li>
                                         
                                       {% endif %}
                                    {% endfor %}

                                    <hr class="dropdown-divider">
                                    <li><input class="input_table_data" type="file" id="table2_input_files_to_{{ item.cell_id }}" name="table2_input_files_to_{{ item.cell_id }}" multiple></li>
                                    <input type="hidden" name="mybutton2{{ item.cell_id }}" id="mybutton2{{ item.cell_id }}">
                                    <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table2('{{item.cell_id}}','table2','vt')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                    <li></li>
                                    
                    
                                  </ul>
                    
                    
                                </nav>
                              </td> 
                              
                              <td class="badge-cell" data-state="badge">

                                <span class="badge" data-badge="A realiser">A réaliser</span>
                                <span class="badge" data-badge="En cours">En cours</span>
                                <span class="badge" data-badge="A modifier">A modifier</span>
                                <span class="badge" data-badge="Modification Faite">Modification Faite</span>
                                <span class="badge" data-badge="Reclamation">Reclamation</span>
                                <span class="badge" data-badge="Reclamation Faite">Réclamation Faite</span>
                                <span class="badge" data-badge="Envoye">Envoyé</span>
                                <span class="badge" data-badge="Annule">Annule</span>
                                <span class="badge" data-badge="Fini">Fini</span>

                                <select class="form-select" aria-label="Default select example"  name="cell_data6edit" id="table2_etat{{ item.cell_id }}" style="background-color:gray;">
                                    <option value="A realiser" {% if item.etat  == "A realiser" %}selected{% endif %}>A réaliser</option>
                                    <option value="En cours"  {% if item.etat  == "En cours" %}selected{% endif %} >En cours</option>
                                    <option value="A modifier"  {% if item.etat  == "A modifier" %}selected{% endif %} >A modifier</option>
                                    <option value="Modification Faite" {% if item.etat  == "Modification Faite" %}selected{% endif %}>Modification faite</option>
                                    <option value="Reclamation" {% if item.etat  == "Reclamation" %}selected{% endif %} >Réclamation</option>
                                    <option value="Reclamation Faite"  {% if item.etat  == "Reclamation Faite" %}selected{% endif %} >Réclamation faite</option>
                                    <option value="Envoye"   {% if item.etat  == "Envoye" %}selected{% endif %} >Envoyé</option>
                                    <option value="Annule" {% if item.etat  == "Annule" %}selected{% endif %} >Annule</option>
                                    <option value="Fini"  {% if item.etat  == "Fini" %}selected{% endif %} >Fini</option>
                                </select>
                              </td>


                                <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>


                            

                            <td class="td_input_cell"> <!-- auditV1-->
                              <nav class="header-nav ms-auto" >
                                <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                  <i class="ri-file-list-3-line"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                  
                                     <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                     {% for F in datafiles_AuditV1 %}
                                    
                                     {% if F.file_id == item.cell_id %}
                                     <li>
                                       <li class="list-inline-item">
                                         {% if F.file_format == "excel" %}
                                         <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                         {% elif F.file_format == "pdf" %}
                                         <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                         {% elif F.file_format == "image" %}
                                           <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                         {% elif F.file_format == "word" %}
                                           <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                         {% elif F.file_format == "pz2" %}
                                           <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                         {% else %}
                                           <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                         {% endif %}
                                       </li>
                                         
                                         {{ F.file_name }}
                                           
                                       <li class="list-inline-item">
                                         <button  class="button_table_data" type="button" id="" name="" value="" onclick="remove_file_from_m('{{item.cell_id}}','{{F.file_index}}','auditV1')">
                                           <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                         </button>
                                       </li>
                                     </li>
                                        
                                      {% endif %}
                                   {% endfor %}
                                   <hr class="dropdown-divider">
                                    <li><input class="input_table_data" type="file" id="table2_input_files_to_{{ item.cell_id }}" name="table2_input_files_to_{{ item.cell_id }}" multiple></li>
                                    <input type="hidden" name="mybutton2{{ item.cell_id }}" id="mybutton2{{ item.cell_id }}">
                                    <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table2('{{item.cell_id}}','table2','auditV1')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                    <li></li>
                                    
                                  
                  
                                </ul>
                  
                  
                              </nav>
                            </td>
                  
                  
                            <td class="td_input_cell"> <!-- auditV2-->
                              <nav class="header-nav ms-auto" >
                                <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                  <i class="ri-file-list-3-line"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                  
                                  <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                  {% for F in datafiles_AuditV2 %}
                                 
                                  {% if F.file_id == item.cell_id %}
                                  <li>
                                    <li class="list-inline-item">
                                      {% if F.file_format == "excel" %}
                                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                      {% elif F.file_format == "pdf" %}
                                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                      {% elif F.file_format == "image" %}
                                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                      {% elif F.file_format == "word" %}
                                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                      {% elif F.file_format == "pz2" %}
                                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                      {% else %}
                                        <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                      {% endif %}
                                    </li>
                                      
                                      {{ F.file_name }}
                                        
                                    <li class="list-inline-item">
                                      <button  class="button_table_data" type="button" id="" name="" value="" onclick="remove_file_from_m('{{item.cell_id}}','{{F.file_index}}','auditV2')">
                                        <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                      </button>
                                    </li>
                                  </li>
                                     
                                   {% endif %}
                                {% endfor %}
                                <hr class="dropdown-divider">
                                 <li><input class="input_table_data" type="file" id="table2_input_files_to_{{ item.cell_id }}" name="table2_input_files_to_{{ item.cell_id }}" multiple></li>
                                 <input type="hidden" name="mybutton2{{ item.cell_id }}" id="mybutton2{{ item.cell_id }}">
                                 <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table2('{{item.cell_id}}','table2','auditV2')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                 <li></li>
                                 
                               
               
                             </ul>
                  
                  
                              </nav>
                            </td>
                  
                            <td class="td_input_cell"> <!-- auditV3-->
                              <nav class="header-nav ms-auto" >
                                <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                  <i class="ri-file-list-3-line"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                  
                                  <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                  {% for F in datafiles_AuditV3 %}
                                 
                                  {% if F.file_id == item.cell_id %}
                                  <li>
                                    <li class="list-inline-item">
                                      {% if F.file_format == "excel" %}
                                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                      {% elif F.file_format == "pdf" %}
                                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                      {% elif F.file_format == "image" %}
                                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                      {% elif F.file_format == "word" %}
                                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                      {% elif F.file_format == "pz2" %}
                                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                      {% else %}
                                        <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                      {% endif %}
                                    </li>
                                      
                                      {{ F.file_name }}
                                        
                                    <li class="list-inline-item">
                                      <button  class="button_table_data" type="button" id="" name="" value="" onclick="remove_file_from_m('{{item.cell_id}}','{{F.file_index}}','auditV3')">
                                        <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                      </button>
                                    </li>
                                  </li>
                                     
                                   {% endif %}
                                {% endfor %}
                                <hr class="dropdown-divider">
                                 <li><input class="input_table_data" type="file" id="table2_input_files_to_{{ item.cell_id }}" name="table2_input_files_to_{{ item.cell_id }}" multiple></li>
                                 <input type="hidden" name="mybutton2{{ item.cell_id }}" id="mybutton2{{ item.cell_id }}">
                                 <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table2('{{item.cell_id}}','table2','auditV3')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                 <li></li>
               
                             </ul>
                  
                  
                              </nav>
                            </td>
                  
                  
                            <td class="td_input_cell"> <!-- auditFinal-->
                              <nav class="header-nav ms-auto" >
                                <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                  <i class="ri-file-list-3-line"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                  
                                  <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                  {% for F in datafiles_AuditFinal %}
                                 
                                  {% if F.file_id == item.cell_id %}
                                  <li>
                                    <li class="list-inline-item">
                                      {% if F.file_format == "excel" %}
                                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                      {% elif F.file_format == "pdf" %}
                                      <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                      {% elif F.file_format == "image" %}
                                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                      {% elif F.file_format == "word" %}
                                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                      {% elif F.file_format == "pz2" %}
                                        <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                      {% else %}
                                        <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                      {% endif %}
                                    </li>
                                      
                                      {{ F.file_name }}
                                        
                                    <li class="list-inline-item">
                                      <button  class="button_table_data" type="button" id="" name="" value="" onclick="remove_file_from_m('{{item.cell_id}}','{{F.file_index}}','auditFinal')">
                                        <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                      </button>
                                    </li>
                                  </li>
                                     
                                   {% endif %}
                                {% endfor %}
                                <hr class="dropdown-divider">
                                 <li><input class="input_table_data" type="file" id="table2_input_files_to_{{ item.cell_id }}" name="table2_input_files_to_{{ item.cell_id }}" multiple></li>
                                 <input type="hidden" name="mybutton2{{ item.cell_id }}" id="mybutton2{{ item.cell_id }}">
                                 <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table1_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table2('{{item.cell_id}}','table2','auditFinal')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                 <li></li>
               
                             </ul>
                  
                  
                              </nav>
                            </td>

                              <td class="td_input_cell"><input class="input_table_data" type="text"></td>

                                
                              <td class="td_input_cell td-form-check-checkbox" >

                                <input class="form-check-input form-check-checkbox" type="checkbox" value="True" id="table2_paiement{{ item.cell_id }}" {% if  item.paiement %}  checked  {% endif %}>
                              </td>

                              <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4add" ></td>
                              <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4add" ></td>
                              <td><p>{{ item.creation_time|date:_("d m Y H:i") }} </p></td>

                            </tr>
                            {% endif %}
                            {% endfor %}
                          
                        </tbody>
                    </table>
                    <!--{} form.as_p -->
                    <!--<button class="btn ri-add-fill"></button>-->
                    
                </form>
              </div>
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

                <!-- redirect with param -->
                <script>
                        
                  function my_Func_edit_table_2(id) {
                    
                    var x0 = document.getElementById("table2_hidden_id"+id).value;
                    var x1 = document.getElementById("table2_firstname"+id).value;
                    var x2 = document.getElementById("table2_lastname"+id).value;
                    var x3 = document.getElementById("table2_address"+id).value;
                    var x4 = document.getElementById("table2_num"+id).value;
                    

                    var selectElement = document.querySelector('#table2_etat'+id);
                    var x6 = selectElement.value;
                    var x7 = document.getElementById("table2_paiement"+id);
                      //var x7 = document.getElementById("cell_data7edit"+id).value;
                      //var x8 = document.getElementById("cell_data8edit"+id).value;
                      //var x9 = document.getElementById("cell_data9edit"+id).value;
                      //var x10 = document.getElementById("cell_data10edit"+id).value;
                    
                      if (x7.checked) {
                        x7="True";
                      } else {
                        x7="False";
                      }
                      var url2="{% url 'editFormTable' %}?"+
                        "param=" + encodeURIComponent(x0) +
                        "&param0=" + x0 +
                        "&param1=" + encodeURIComponent(x1) +
                        "&param2=" + encodeURIComponent(x2)+
                        "&param3=" + encodeURIComponent(x3)+
                        "&param4=" + encodeURIComponent(x4)+
                        "&param6=" + encodeURIComponent(x6)+
                        "&param7=" + encodeURIComponent(x7);
                        
                      window.location.href = url2;

                  }
                  </script>
                  <!-- end redirect with param -->

                </div>
              </div>
            </div><!-- End Recent Sales -->
          </div>
          <!--  ======================================================== end table 2 ===============================================================  -->
          <!--  ======================================================== end table 2 ===============================================================  -->
          <!--  ======================================================== end table 2 ===============================================================  -->












 <!--  ======================================================== start table 3 ===============================================================  -->
 <!--  ======================================================== start table 3 ===============================================================  -->
 <!--  ======================================================== start table 3 ===============================================================  -->
 <!--  ======================================================== start table 3 ===============================================================  -->
 <!-- Recent Sales -->
            <div class="row">
           
              <div class="col-12">
                <div class="card recent-sales overflow-auto">
  
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>
  
                      <li><a class="dropdown-item" href="#">Today</a></li>
                      <li><a class="dropdown-item" href="#">This Month</a></li>
                      <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                  </div>
                  
                  <div class="card-body" >
                    <h5 class="card-title">Title <span>| title</span></h5>
  
                    
                    
                    <input class="form-control" type="text" id="filterInput_3" placeholder="Search..." style="width:30%;min-width:100px;">
                    <div class="overflow-auto" style="padding:1px;">
                    <form method="post"  enctype="multipart/form-data">
                      {% csrf_token %}
                      <input type="hidden" name="myid3" id="myid3">
                      <input type="hidden" name="col_type3" id="col_type3">
                      <input type="hidden" name="mybutton3" id="mybutton3">

                      <table class="table  table-hover   table-bordered  table-borderless border-info " id="tableDATA_3" cellspacing="0" >  <!-- table-sm  table-responsive-->
  
                          <thead class="table-dark border-info">
                            <th class="fixed-column"></th><!--style="width:auto;"-->
                            <th data-sortable="true" data-column="id" >id <span class="sortable-icon"  data-column="id"></span></th>
                            <th>Prénom</th>  
                            <th>Nom</th> 
                            <th data-sortable="true" data-column="adresse">Adresse <span class="sortable-icon"  data-column="adresse"></th> 
                            <th>N° de tél</th> 
                            <th>Visite technique</th> 
                            <th >État</th> 
                            <th>Travaux à preconise</th> 
                            <th>Audit v1</th> 
                            <th>Audit v2</th> 
                            <th>Audit v3</th> 
                            <th>Audit fin</th> 
                            <th>Coffrac</th> 
                            <th>Paiement</th>
                            <th>Agent</th>
                            <th>Auditeur</th>
                            <th>Date de création</th>
                          </thead>
                          <tbody id="myTable_3">
                              {% for item in data %}
                              {% if item.etat == "Fin" or item.etat == "Fini"%}
                              <input class="input_table_data" type="hidden" name="cell_data0" id="table3_hidden_id{{item.cell_id}}" value="{{item.cell_id}}">
                            <tr>
                                <td class="fixed-column fixed-column-backcolor" style="width:auto;"><button  class="button_table_data" type="button" id="table3_edit_col" name="" value="" onclick="my_Func_edit_table_3('{{item.cell_id}}') "><i class="ri-edit-2-fill"></i></button></td>
                                <td ><p style="width:auto;">{{ item.cell_id }}</p></td>
                                <td class="td_input_cell" ><input class="input_table_data" type="text" name="table3_firstname" id="table3_firstname{{ item.cell_id }}" value="{{ item.firstname }}"  ></td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="table3_lastname" id="table3_lastname{{ item.cell_id }}" value="{{ item.lastname }}"  ></td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="table3_address" id="table3_address{{ item.cell_id }}" value="{{ item.address }}"  ></td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="table3_num" id="table3_num{{ item.cell_id }}" value="{{ item.num }}"  ></td>  
                                

                                <td class="td_input_cell" > <!-- VT-->
                                  <nav class="header-nav ms-auto" >
                                    <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                      <i class="ri-file-list-3-line"></i>
                                      
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                      
                                         <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                      {% for F in datafiles_VT %}
                                      
                                        {% if F.file_id == item.cell_id %}
                                        <li>
                                          <li class="list-inline-item">
                                            {% if F.file_format == "excel" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                            {% elif F.file_format == "pdf" %}
                                            <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                            {% elif F.file_format == "image" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                            {% elif F.file_format == "word" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                            {% elif F.file_format == "pz2" %}
                                              <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                            {% else %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                            {% endif %}
                                          </li>
                                            
                                            {{ F.file_name }}
                                              
                                          <li class="list-inline-item">
                                            <button  class="button_table_data" type="button" id="" name="" value="" onclick="remove_file_from_m('{{item.cell_id}}','{{F.file_index}}','vt')">
                                              <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                            </button>
                                          </li>
                                        </li>
                                           
                                         {% endif %}
                                      {% endfor %}
                                      <!-- <li style="text-align:center;height:20px;">
                                           <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                                           
                                      </li>-->
                                      <hr class="dropdown-divider">
                                      <li><input class="input_table_data" type="file" id="table3_input_files_to_{{ item.cell_id }}" name="table3_input_files_to_{{ item.cell_id }}" multiple></li>
                                      <input type="hidden" name="mybutton3{{ item.cell_id }}" id="mybutton3{{ item.cell_id }}">
                                      <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table3_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table3('{{item.cell_id}}','table3','vt')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                      <li></li>
                                      

                                    </ul>


                                  </nav>
                                </td> <!--  target="_blank"-->
                                

                                <td class="badge-cell" data-state="badge">

                                  <span class="badge" data-badge="A realiser">A réaliser</span>
                                  <span class="badge" data-badge="En cours">En cours</span>
                                  <span class="badge" data-badge="A modifier">A modifier</span>
                                  <span class="badge" data-badge="Modification Faite">Modification Faite</span>
                                  <span class="badge" data-badge="Reclamation">Reclamation</span>
                                  <span class="badge" data-badge="Reclamation Faite">Réclamation Faite</span>
                                  <span class="badge" data-badge="Envoye">Envoyé</span>
                                  <span class="badge" data-badge="Annule">Annule</span>
                                  <span class="badge" data-badge="Fini">Fini</span>

                                  <select class="form-select" aria-label="Default select example"  name="cell_data6edit" id="table3_etat{{ item.cell_id }}" style="background-color:gray;">
                                      <option value="A realiser" {% if item.etat  == "A realiser" %}selected{% endif %}>A réaliser</option>
                                      <option value="En cours"  {% if item.etat  == "En cours" %}selected{% endif %} >En cours</option>
                                      <option value="A modifier"  {% if item.etat  == "A modifier" %}selected{% endif %} >A modifier</option>
                                      <option value="Modification Faite" {% if item.etat  == "Modification Faite" %}selected{% endif %}>Modification faite</option>
                                      <option value="Reclamation" {% if item.etat  == "Reclamation" %}selected{% endif %} >Réclamation</option>
                                      <option value="Reclamation Faite"  {% if item.etat  == "Reclamation Faite" %}selected{% endif %} >Réclamation faite</option>
                                      <option value="Envoye"   {% if item.etat  == "Envoye" %}selected{% endif %} >Envoyé</option>
                                      <option value="Annule" {% if item.etat  == "Annule" %}selected{% endif %} >Annule</option>
                                      <option value="Fini"  {% if item.etat  == "Fini" %}selected{% endif %} >Fini</option>
                                  </select>
                                </td>
  
  
                                  <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>


                                  <td class="td_input_cell"> <!-- auditV1-->
                                    <nav class="header-nav ms-auto" >
                                      <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                        <i class="ri-file-list-3-line"></i>
                                      </a>
                                      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                        
                                           <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                        {% for F in datafiles_AuditV1 %}
                                        
                                          {% if F.file_id == item.cell_id %}
                                          <li>
                                            <li class="list-inline-item">
                                              {% if F.file_format == "excel" %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                              {% elif F.file_format == "pdf" %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                              {% elif F.file_format == "image" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                              {% elif F.file_format == "word" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                              {% elif F.file_format == "pz2" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                              {% else %}
                                                <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                              {% endif %}
                                            </li>
                                              
                                              {{ F.file_name }}
                                                
                                            <li class="list-inline-item">
                                              <button  class="button_table_data" type="button" id="table3_edit_col" name="" value="" onclick="table3_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditV1')">
                                                <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                              </button>
                                            </li>
                                          </li>
                                             
                                           {% endif %}
                                        {% endfor %}

                                        <hr class="dropdown-divider">
                                        <li><input class="input_table_data" type="file" id="table3_input_files_to_{{ item.cell_id }}" name="table3_input_files_to_{{ item.cell_id }}" multiple></li>
                                        <input type="hidden" name="mybutton3{{ item.cell_id }}" id="mybutton3{{ item.cell_id }}">
                                        <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table3_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table3('{{item.cell_id}}','table3','auditV1')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                        <li></li>
                                        
  
                                      </ul>
  
  
                                    </nav>
                                  </td>
                                  <td class="td_input_cell"> <!-- auditV2-->
                                    <nav class="header-nav ms-auto" >
                                      <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                        <i class="ri-file-list-3-line"></i>
                                      </a>
                                      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                        
                                           <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                        {% for F in datafiles_AuditV2 %}
                                        
                                          {% if F.file_id == item.cell_id %}
                                          <li>
                                            <li class="list-inline-item">
                                              {% if F.file_format == "excel" %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                              {% elif F.file_format == "pdf" %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                              {% elif F.file_format == "image" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                              {% elif F.file_format == "word" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                              {% elif F.file_format == "pz2" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                              {% else %}
                                                <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                              {% endif %}
                                            </li>
                                              
                                              {{ F.file_name }}
                                                
                                            <li class="list-inline-item">
                                              <button  class="button_table_data" type="button" id="table3_edit_col" name="" value="" onclick="table3_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditV2')">
                                                <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                              </button>
                                            </li>
                                          </li>
                                             
                                           {% endif %}
                                        {% endfor %}
                                        <!-- <li style="text-align:center;height:20px;">
                                             <button  class="button_table_data" type="button" id="table1_edit_col" name="" value="" onclick="table1_add_files_to_auditV1('{{item.cell_id}}')"><i class="ri-file-add-fill" style="height:30px;width:30px; !important" ></i></button>
                                             
                                        </li>-->
                                        <hr class="dropdown-divider">
                                        <li><input class="input_table_data" type="file" id="table3_input_files_to_{{ item.cell_id }}" name="table3_input_files_to_{{ item.cell_id }}" multiple></li>
                                        <input type="hidden" name="mybutton3{{ item.cell_id }}" id="mybutton3{{ item.cell_id }}">
                                        <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table3_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table3('{{item.cell_id}}','table3','auditV2')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                        <li></li>
                                        
                                      </ul>
                                    </nav>
                                  </td>

                                  <td class="td_input_cell"> <!-- auditV3-->
                                    <nav class="header-nav ms-auto" >
                                      <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                        <i class="ri-file-list-3-line"></i>
                                      </a>
                                      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                        
                                           <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                        {% for F in datafiles_AuditV3 %}
                                        
                                          {% if F.file_id == item.cell_id %}
                                          <li>
                                            <li class="list-inline-item">
                                              {% if F.file_format == "excel" %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                              {% elif F.file_format == "pdf" %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                              {% elif F.file_format == "image" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                              {% elif F.file_format == "word" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                              {% elif F.file_format == "pz2" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                              {% else %}
                                                <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                              {% endif %}
                                            </li>
                                              
                                              {{ F.file_name }}
                                                
                                            <li class="list-inline-item">
                                              <button  class="button_table_data" type="button" id="table3_edit_col" name="" value="" onclick="table3_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditV3')">
                                                <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                              </button>
                                            </li>
                                          </li>
                                             
                                           {% endif %}
                                        {% endfor %}

                                        <hr class="dropdown-divider">
                                        <li><input class="input_table_data" type="file" id="table3_input_files_to_{{ item.cell_id }}" name="table3_input_files_to_{{ item.cell_id }}" multiple></li>
                                        <input type="hidden" name="mybutton3{{ item.cell_id }}" id="mybutton3{{ item.cell_id }}">
                                        <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table3_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table3('{{item.cell_id}}','table3','auditV3')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                        <li></li>
                                      </ul>
                                    </nav>
                                  </td>

                                  <td class="td_input_cell"> <!-- auditFinal-->
                                    <nav class="header-nav ms-auto" >
                                      <a class="nav-link nav-icon show" href="#" data-bs-toggle="dropdown" aria-expanded="true">
                                        <i class="ri-file-list-3-line"></i>
                                      </a>
                                      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages dropdown-menu-for-showFils" data-popper-placement="bottom-end" >
                                        
                                           <!-- for i in datafiles  if item.cell_id == i.file_id -->
                                        {% for F in datafiles_AuditFinal %}
                                        
                                          {% if F.file_id == item.cell_id %}
                                          <li>
                                            <li class="list-inline-item">
                                              {% if F.file_format == "excel" %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-excel-2-line" ></i></a>
                                              {% elif F.file_format == "pdf" %}
                                              <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-pdf" ></i></a>
                                              {% elif F.file_format == "image" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-image" ></i></a>
                                              {% elif F.file_format == "word" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-earmark-word" ></i></a>
                                              {% elif F.file_format == "pz2" %}
                                                <a class="nav-link nav-icon show" href="{{ F.file_save.url }}" download><i class="bi bi-file-ppt" ></i></a>
                                              {% else %}
                                                <a class="nav-link nav-icon show"  href="{{ F.file_save.url }}" download><i class="ri-file-line" ></i></a>
                                              {% endif %}
                                            </li>
                                              
                                              {{ F.file_name }}
                                                
                                            <li class="list-inline-item">
                                              <button  class="button_table_data" type="button" id="table3_edit_col" name="" value="" onclick="table3_remove_file_from_model('{{item.cell_id}}','{{F.file_index}}','auditFinal')">
                                                <i class="ri-delete-bin-2-fill" style="color:red;"></i>
                                              </button>
                                            </li>
                                          </li>
                                             
                                           {% endif %}
                                        {% endfor %}
                                        <hr class="dropdown-divider">
                                        <li><input class="input_table_data" type="file" id="table3_input_files_to_{{ item.cell_id }}" name="table3_input_files_to_{{ item.cell_id }}" multiple></li>
                                        <input type="hidden" name="mybutton3{{ item.cell_id }}" id="mybutton3{{ item.cell_id }}">
                                        <li style="text-align:center;height:20px;"><button  class="button_table_data" type="submit" value="clicked" id="table3_add_file_to_row_{{ item.cell_id }}"   onclick="add_files_to_table3('{{item.cell_id}}','table3','auditFinal')"><i class="bi bi-save2" style="height:30px;width:30px; !important" ></i></button></li> 
                                        <li></li>
                                      </ul>
                                    </nav>
                                  </td>



                                  <td class="td_input_cell"><input class="input_table_data" type="text"   ></td>

                                
                                <td class="td_input_cell td-form-check-checkbox" >
                                  <input class="form-check-input form-check-checkbox" type="checkbox" value="True" id="table3_paiement{{ item.cell_id }}"  {% if  item.paiement  %} Checked {% endif %}>
                                </td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4add" ></td>
                                <td class="td_input_cell"><input class="input_table_data" type="text" name="cell_data4add" ></td>
                                <td><p>{{ item.creation_time|date:_("d m Y H:i") }} </p></td>
                              </tr>
                              {% endif %}
                              {% endfor %}
                            
                          </tbody>
                      </table>
                      <!--{} form.as_p -->
                      <!--<button class="btn ri-add-fill"></button>-->
                      
                  </form>
                  
                  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
                  <!-- redirect with param -->
                  <script>
                          
                    function my_Func_edit_table_3(id) {
                      
                        var x0 = document.getElementById("table3_hidden_id"+id).value;
                        var x1 = document.getElementById("table3_firstname"+id).value;
                        var x2 = document.getElementById("table3_lastname"+id).value;
                        var x3 = document.getElementById("table3_address"+id).value;
                        var x4 = document.getElementById("table3_num"+id).value;

                        var selectElement = document.querySelector('#table3_etat'+id);
                        var x6 = selectElement.value;
                        
                        var x7 = document.getElementById("table3_paiement"+id);

                      
                        if (x7.checked) {
                          x7="True";
                        } else {
                          x7="False";
                        }
                        
                        var url2="{% url 'editFormTable' %}?"+
                          "param=" + encodeURIComponent(x0) +
                          "&param0=" + x0 +
                          "&param1=" + encodeURIComponent(x1) +
                          "&param2=" + encodeURIComponent(x2)+
                          "&param3=" + encodeURIComponent(x3)+
                          "&param4=" + encodeURIComponent(x4)+
                          "&param6=" + encodeURIComponent(x6)+
                          "&param7=" + encodeURIComponent(x7);
  
                          
                        window.location.href = url2;
  
                    }
                    </script>
                    <!-- end redirect with param -->
  
                  </div>
                </div>
              </div><!-- End Recent Sales -->
            </div>
            <!--  ======================================================== end table 3 ===============================================================  -->
            <!--  ======================================================== end table 3 ===============================================================  -->
            <!--  ======================================================== end table 3 ===============================================================  -->



        
          
      </div>
    </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  {% else %}
      
  <div class=""style="padding:10% 30% 10% 30%;"> <!-- overflow hidden for iPad mini landscape view-->
    <div class="templatemo-content-widget white-bg templatemo-overflow-hidden">
          <h1 class="text-center" style="font-weight:bold;margin-bottom:20px;">You are not logged in</h1>
          <h3 class="text-center" style="margin-bottom:10px;"><a href="/login">Click here</a> to login</h2>
          <!-- <h3 class="text-center">If you have not registered please <a href="/signup">click here</a></h2>
            
            Pie chart div <div id="pie_chart_div" class="templatemo-chart"></div> -->
    </div>
</div>

  {% endif %}

  <script>
      // table1_remove_file_from_model
    function remove_file_from_m(id,index,column) {
        
      var url2="{% url 'remove_file_from_MODEL' %}?"+
        "param0=" + encodeURIComponent(id) +
        "&param1=" + encodeURIComponent(index)+
        "&param2=" + encodeURIComponent(column); 
      window.location.href = url2;

      }
      function table1_remove_file_from_model(id1,index1,column) {
      remove_file_from_m(id1,index1,column);
      }
      function table2_remove_file_from_model(id1,index1,column) {
      remove_file_from_m(id1,index1,column);
      }
      function table3_remove_file_from_model(id1,index1,column) {
      remove_file_from_m(id1,index1,column);    
      }
  </script>


  <script>
  function add_files_to_table(fileId, table, col_type) {
    
    // Set the values of the hidden input fields in the form
    document.getElementById("myid1").value = fileId;
    //document.getElementById("table1").value = table;
    document.getElementById("col_type1").value = col_type;
    document.getElementById("mybutton1").value = "clicked";
  }
  </script>
  <script>
  function add_files_to_table2(fileId, table, col_type) {
    
    // Set the values of the hidden input fields in the form
    document.getElementById("myid2").value = fileId;
    //document.getElementById("table").value = table;
    document.getElementById("col_type2").value = col_type;
    document.getElementById("mybutton2").value = "clicked";
    }
  </script>
  
  <script>
  function add_files_to_table3(fileId, table, col_type) {
    
    // Set the values of the hidden input fields in the form
    document.getElementById("myid3").value = fileId;
    //document.getElementById("table").value = table;
    document.getElementById("col_type3").value = col_type;
    document.getElementById("mybutton3").value = "clicked";
  }
  </script>

  <script>

    
    function send_message_box(cell_id,box) {
    
    
      var message = document.getElementById("input_msg_"+cell_id).value;
      
      var x1 = document.getElementById("user_email").value;
      var x2 = document.getElementById("user_firstname").value;
      var x3 = document.getElementById("user_lastname").value;
      if (message !== null) {
        var url2="{% url 'send_message_box1' %}?"+
          "param0=" + cell_id +
          "&param1=" + x1 +
          "&param2=" + x2 +
          "&param3=" + x3 +
          "&param4=" + box +
          "&param5=" + message ;
        window.location.href = url2;
    } 
        
    
    }

  </script>
  
  <script type="text/javascript" src="{% static 'vendor/apexcharts/apexcharts.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/chart.js/chart.umd.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/echarts/echarts.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/quill/quill.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/simple-datatables/simple-datatables.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/tinymce/tinymce.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'vendor/php-email-form/validate.js' %}"></script>

  

  <!-- Template Main JS File -->
  <script type="text/javascript" src="{% static 'js/main.js'%}"></script>
  <script type="text/javascript" src="{% static 'js/main2.js'%}"></script>
  <script type="text/javascript" src="{% static 'js/main3.js'%}"></script>
  <script type="text/javascript" src="{% static 'js/main4.js'%}"></script>
  <script type="text/javascript" src="{% static 'js/main5.js'%}"></script>
</body>

</html>